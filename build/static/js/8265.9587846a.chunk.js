"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8265],{22054:(e,s,t)=>{t.d(s,{A:()=>o});t(65043);var a=t(86213),r=t(17598);const o=()=>({REGISTER:async e=>{try{return(await a.A.post("".concat(r.T,"/api/users/register"),e)).data}catch(s){throw console.log("Error registering:",s),s}},LOGIN:async e=>{try{return(await a.A.post("".concat(r.T,"/api/users/login"),e)).data}catch(s){throw console.log("Invalid credentials:",s),s}}})},17598:(e,s,t)=>{t.d(s,{T:()=>a});const a="http://13.201.104.31:3007"},13254:(e,s,t)=>{t.d(s,{N:()=>a});t(86213).A.create({baseURL:"http://192.168.1.69:3002"});class a{static isAuthenticated(){return null!==localStorage.getItem("token")}static login(e){localStorage.setItem("token",e)}static logout(){localStorage.removeItem("token")}static getUserData(){return localStorage.getItem("user")}}},28265:(e,s,t)=>{t.r(s),t.d(s,{default:()=>N});var a=t(65043),r=t(53519),o=t(61072),n=t(78602),c=t(88258),l=t(67006),i=t(71666),d=t(68155),u=t(73216),p=t(35475),m=t(13254),h=t(22054);class g extends Error{}function x(e){let s=e.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,s)=>{let t=s.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(s)}catch(t){return atob(s)}}g.prototype.name="InvalidTokenError";var f=t(59395),w=(t(38421),t(70579));const N=()=>{const{user:e,setUser:s}=(0,a.useContext)(f.R),t=(0,u.Zp)(),[N,j]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[_,A]=(0,a.useState)(""),[y,I]=(0,a.useState)("");(0,a.useEffect)((()=>{console.log(e.userId)}),[e]);return(0,w.jsx)("div",{className:"login_background",children:(0,w.jsx)(r.A,{className:"d-flex justify-content-center mt-5",children:(0,w.jsx)(o.A,{className:"w-100",children:(0,w.jsx)(n.A,{md:5,className:"mx-auto",children:(0,w.jsx)(c.A,{className:"p-5",id:"card_border_color_change",style:{boxShadow:"4px 4px 60px rgb(61, 61, 61)"},children:(0,w.jsxs)(l.A,{className:"row g-3 needs-validation",noValidate:!0,children:[(0,w.jsx)("h1",{className:"text-center defaultcolor",children:"Log In"}),(0,w.jsx)(i.A,{className:"mb-2",children:(0,w.jsx)(l.A.Control,{className:"input_fields",onChange:e=>j(e.target.value),style:{borderRadius:"8px"},type:"email",placeholder:"Email address"})}),(0,w.jsx)(i.A,{className:"mb-4",children:(0,w.jsx)(l.A.Control,{className:"input_fields",onChange:e=>v(e.target.value),style:{borderRadius:"8px"},type:"password",placeholder:"Password"})}),(0,w.jsx)(o.A,{children:(0,w.jsxs)(n.A,{xs:12,className:"text-center",children:[(0,w.jsx)(d.A,{onClick:()=>{(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).toLowerCase()))(N)?(0,h.A)().LOGIN({email:N,password:b}).then((e=>{console.log(e);const a=e.data.token;console.log(e);const r=function(e,s){if("string"!==typeof e)throw new g("Invalid token specified: must be a string");s||(s={});const t=!0===s.header?0:1,a=e.split(".")[t];if("string"!==typeof a)throw new g("Invalid token specified: missing part #".concat(t+1));let r;try{r=x(a)}catch(o){throw new g("Invalid token specified: invalid base64 for part #".concat(t+1," (").concat(o.message,")"))}try{return JSON.parse(r)}catch(o){throw new g("Invalid token specified: invalid json for part #".concat(t+1," (").concat(o.message,")"))}}(a);console.log(r),s((e=>({...e,userId:r.userId,email:r.email,role:r.role}))),e.status&&"Login successful"===e.message?(A("Logged in successfully!"),m.N.login(a),"firm_user"===r.role?t("/firm_user_dash"):t("/super_admin_dash"),setTimeout((()=>{window.location.reload()}),1e3)):(I("Unexpected response from server"),A(""))})).catch((e=>{if(console.error("Some error, solve it: ",e),e.response&&e.response.data){const s=e.response.data.message;I("Email and password are required"===s?"All fields are required":"Invalid credentials")}else I("Something went wrong !!");A("")})):I("Invalid email")},className:"px-4",id:"but_color",type:"button",children:"Log in"}),y&&(0,w.jsx)("div",{className:"text-danger",children:y}),_&&(0,w.jsx)("div",{className:"text-success",children:_})]})}),(0,w.jsx)(o.A,{className:"mt-3",children:(0,w.jsx)(n.A,{className:"text-center",children:(0,w.jsx)(p.N_,{to:"/signup",children:(0,w.jsx)(d.A,{className:"px-4",id:"but_color",children:"New User ? Signup"})})})}),(0,w.jsx)("br",{})]})})})})})})}},71666:(e,s,t)=>{t.d(s,{A:()=>h});var a=t(98139),r=t.n(a),o=t(65043),n=t(67852),c=t(21068);const l=o.createContext(null);l.displayName="InputGroupContext";const i=l;var d=t(70579);const u=o.forwardRef(((e,s)=>{let{className:t,bsPrefix:a,as:o="span",...c}=e;return a=(0,n.oU)(a,"input-group-text"),(0,d.jsx)(o,{ref:s,className:r()(t,a),...c})}));u.displayName="InputGroupText";const p=u,m=o.forwardRef(((e,s)=>{let{bsPrefix:t,size:a,hasValidation:c,className:l,as:u="div",...p}=e;t=(0,n.oU)(t,"input-group");const m=(0,o.useMemo)((()=>({})),[]);return(0,d.jsx)(i.Provider,{value:m,children:(0,d.jsx)(u,{ref:s,...p,className:r()(l,t,a&&"".concat(t,"-").concat(a),c&&"has-validation")})})}));m.displayName="InputGroup";const h=Object.assign(m,{Text:p,Radio:e=>(0,d.jsx)(p,{children:(0,d.jsx)(c.A,{type:"radio",...e})}),Checkbox:e=>(0,d.jsx)(p,{children:(0,d.jsx)(c.A,{type:"checkbox",...e})})})}}]);
//# sourceMappingURL=8265.9587846a.chunk.js.map