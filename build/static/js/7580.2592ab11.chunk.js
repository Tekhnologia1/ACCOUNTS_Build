"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7580],{25407:(e,a,t)=>{t.d(a,{Y:()=>s});const s="http://20.235.178.6:3007"},67580:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var s=t(72791),r=t(89743),c=t(2677),l=t(28282),n=t(16157),o=t(33821),i=t(323),d=t(53392),m=t(74292),u=t(34782),h=t(11087),f=t(59513),x=t.n(f),j=(t(68639),t(13162),t(88898)),g=t(25407),_=t(59565),p=t(25857),b=t(80184);const y=()=>{const{user:e}=(0,s.useContext)(j.S),a=e.userId,[t,f]=(0,s.useState)([]),[y,Z]=(0,s.useState)([]),[A,N]=(0,s.useState)(""),[v,C]=(0,s.useState)(""),[w,k]=(0,s.useState)([]),[S,E]=(0,s.useState)([]),[F,R]=(0,s.useState)(""),[T,I]=(0,s.useState)(""),[U,B]=(0,s.useState)(""),[D,L]=(0,s.useState)(""),[M,P]=(0,s.useState)(new Date),[Y,O]=(0,s.useState)(!1),[K,Q]=(0,s.useState)(!1),[z,X]=(0,s.useState)(""),[J,V]=(0,s.useState)(!1),[W,H]=(0,s.useState)(""),[q,G]=(0,s.useState)(""),[$,ee]=(0,s.useState)("");(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(g.Y,"/api/users/get_all_firms_by_adding_user/").concat(a));if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();f(t.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[a]),(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(g.Y,"/api/users/get_all_firms_by_user/").concat(a));if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();Z(t.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[a]);const ae=async e=>{try{const a=await fetch("".concat(g.Y,"/api/users/get_general_ledgers/").concat(e));if(!a.ok)throw new Error("No GLs here");return(await a.json()).data}catch(a){console.error("Error fetching data of GLs:",a)}};(0,s.useEffect)((()=>{(async()=>{if(A){O(!0);const e=await ae(A);k(e),O(!1)}})()}),[A]),(0,s.useEffect)((()=>{(async()=>{if(v){Q(!0);const e=await ae(v);E(e),Q(!1)}})()}),[v]);return(0,b.jsxs)("div",{children:[(0,b.jsx)(_.LC,{}),(0,b.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,b.jsx)(_.WW,{}),(0,b.jsx)("div",{className:"flex-grow-1 px-3 px-md-5",children:(0,b.jsx)(r.Z,{className:"justify-content-center mb-3",children:(0,b.jsx)(c.Z,{xs:12,children:(0,b.jsxs)(l.Z,{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,b.jsxs)(r.Z,{className:"align-items-center",children:[(0,b.jsx)(c.Z,{style:{marginLeft:"11px"},children:(0,b.jsxs)(r.Z,{className:"allfirms_icon_title_row align-items-center",children:[(0,b.jsx)(c.Z,{className:"col-2 col-md-1",children:(0,b.jsx)("img",{className:"sidebar_icon_color",src:p,width:25,height:25,alt:"All Firms Logo"})}),(0,b.jsx)(c.Z,{className:"col-9 col-md-9",children:(0,b.jsx)("h5",{className:"title_font mb-0",style:{color:"white"},children:"Create Receipt"})})]})}),(0,b.jsx)(c.Z,{className:"col-4 makepay_allpay_but_col",children:(0,b.jsx)(h.rU,{to:"/user_allreceipts",children:(0,b.jsx)(n.Z,{id:"but_color",className:"m-0",children:"All Receipts"})})})]}),(0,b.jsx)(r.Z,{className:"allfirms_table_row py-5 justify-content-center",children:(0,b.jsx)(c.Z,{className:"make_pay_block_col mb-3 mb-md-0",children:(0,b.jsx)(r.Z,{className:"justify-content-center",children:(0,b.jsxs)(c.Z,{md:12,children:[(0,b.jsx)(l.Z,{className:"bg_color_blue_white",children:(0,b.jsx)(l.Z.Body,{children:(0,b.jsxs)(o.Z,{children:[(0,b.jsx)(i.Z,{className:"mb-3",controlId:"formTransactionID",children:(0,b.jsx)(d.Z,{children:"Transaction :"})}),(0,b.jsxs)(i.Z,{as:r.Z,className:"mb-3",controlId:"formTo",children:[(0,b.jsx)(d.Z,{column:!0,className:"make_pay_lable",md:3,children:"To:"}),(0,b.jsx)(c.Z,{className:"make_pay_select_firm",children:(0,b.jsxs)(o.Z.Control,{as:"select",value:v,className:"form-select",onChange:e=>C(e.target.value),children:[(0,b.jsx)("option",{value:"",children:"Select Firm"}),y.map((e=>(0,b.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,b.jsx)(c.Z,{className:"make_pay_select_acc",children:(0,b.jsxs)(o.Z.Control,{as:"select",value:T,className:"form-select",onChange:e=>I(e.target.value),disabled:!v||K,children:[(0,b.jsx)("option",{value:"",children:"Select Your Firm Account"}),S.map((e=>(0,b.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]})})]}),(0,b.jsxs)(i.Z,{as:r.Z,className:"mb-3",controlId:"formFrom",children:[(0,b.jsx)(d.Z,{column:!0,className:"make_pay_lable",md:3,children:"From:"}),(0,b.jsx)(c.Z,{className:"make_pay_select_firm",children:(0,b.jsxs)(o.Z.Control,{as:"select",value:A,className:"form-select",onChange:e=>N(e.target.value),children:[(0,b.jsx)("option",{value:"",children:"Select Firm"}),t.map((e=>(0,b.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,b.jsx)(c.Z,{className:"make_pay_select_acc",children:(0,b.jsxs)(o.Z.Control,{as:"select",value:F,className:"form-select",onChange:e=>R(e.target.value),disabled:!A||Y,children:[(0,b.jsx)("option",{value:"",children:"Select Your Firm Account"}),w.map((e=>(0,b.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]})})]}),(0,b.jsxs)(i.Z,{as:r.Z,className:"mb-3",controlId:"formAmount",children:[(0,b.jsx)(d.Z,{column:!0,xs:12,sm:3,children:"Amount:"}),(0,b.jsxs)(c.Z,{xs:12,sm:4,children:[(0,b.jsx)(m.Z,{type:"text",placeholder:"Enter Amount",value:U,onChange:e=>B(e.target.value),isInvalid:!!z}),(0,b.jsx)(o.Z.Control.Feedback,{type:"invalid",children:z})]})]}),(0,b.jsxs)(i.Z,{as:r.Z,className:"mb-3",controlId:"formDate",children:[(0,b.jsx)(d.Z,{column:!0,className:"make_pay_lable",md:3,children:"Date:"}),(0,b.jsx)(c.Z,{xs:12,sm:4,children:(0,b.jsx)(x(),{selected:M,onChange:e=>P(e),showTimeSelect:!0,dateFormat:"MMMM d, yyyy h:mm aa",className:"form-control"})})]}),(0,b.jsxs)(i.Z,{as:r.Z,className:"mb-3",controlId:"formRemark",children:[(0,b.jsx)(d.Z,{column:!0,xs:12,sm:3,children:"Remark:"}),(0,b.jsx)(c.Z,{xs:12,sm:9,children:(0,b.jsx)(m.Z,{type:"text",placeholder:"Enter Remark",value:D,onChange:e=>L(e.target.value)})})]})]})})}),(0,b.jsx)(r.Z,{className:"justify-content-center align-content-center mt-3 cf_acc_bt_row",children:(0,b.jsx)(n.Z,{id:"but_color",onClick:()=>{X(""),!U||isNaN(U)||Number(U)<=0?X("Please enter a valid amount greater than zero."):(H("Confirm Receipt"),G("Are you sure you want to proceed with this receipt?"),ee("Confirm Receipt"),V(!0))},children:"Create receipt"})})]})})})})]})})})})]}),(0,b.jsxs)(u.Z,{show:J,onHide:()=>V(!1),centered:!0,children:[(0,b.jsx)(u.Z.Header,{closeButton:!0,children:(0,b.jsx)(u.Z.Title,{children:W})}),(0,b.jsx)(u.Z.Body,{children:q}),(0,b.jsxs)(u.Z.Footer,{children:[(0,b.jsx)(n.Z,{variant:"secondary",onClick:()=>V(!1),children:"Confirm Receipt"===$?"Cancel":"Close"}),"Confirm Receipt"===$&&(0,b.jsx)(n.Z,{id:"but_color",variant:"primary",onClick:async()=>{if("Close"===$)V(!1);else try{const e={to_firm_id:v,to_gl_id:T,from_firm_id:A,from_gl_id:F,amount:Number(U),remark:D,trans_type:"receipt",transaction_date:M.toLocaleDateString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},t=await fetch("".concat(g.Y,"/api/users/receipt/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to process receipt");const s=await t.json();console.log(s),console.log(M),console.log(M.toLocaleDateString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})),H("Amount Received"),G("The amount has been successfully received."),ee("Close")}catch(e){console.error("Error processing receipt:",e),H("Receipt Failed"),G("There was an error processing the receipt. Please try again."),ee("Close")}finally{V(!0)}},children:$})]})]})]})}},16157:(e,a,t)=>{t.d(a,{Z:()=>u});var s=t(81694),r=t.n(s),c=t(72791),l=t(80184);const n=["as","disabled"];function o(e){let{tagName:a,disabled:t,href:s,target:r,rel:c,role:l,onClick:n,tabIndex:o=0,type:i}=e;a||(a=null!=s||null!=r||null!=c?"a":"button");const d={tagName:a};if("button"===a)return[{type:i||"button",disabled:t},d];const m=e=>{(t||"a"===a&&function(e){return!e||"#"===e.trim()}(s))&&e.preventDefault(),t?e.stopPropagation():null==n||n(e)};return"a"===a&&(s||(s="#"),t&&(s=void 0)),[{role:null!=l?l:"button",disabled:void 0,tabIndex:t?void 0:o,href:s,target:"a"===a?r:void 0,"aria-disabled":t||void 0,rel:"a"===a?c:void 0,onClick:m,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),m(e))}},d]}const i=c.forwardRef(((e,a)=>{let{as:t,disabled:s}=e,r=function(e,a){if(null==e)return{};var t,s,r={},c=Object.keys(e);for(s=0;s<c.length;s++)t=c[s],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);const[c,{tagName:i}]=o(Object.assign({tagName:t,disabled:s},r));return(0,l.jsx)(i,Object.assign({},r,c,{ref:a}))}));i.displayName="Button";var d=t(10162);const m=c.forwardRef(((e,a)=>{let{as:t,bsPrefix:s,variant:c="primary",size:n,active:i=!1,disabled:m=!1,className:u,...h}=e;const f=(0,d.vE)(s,"btn"),[x,{tagName:j}]=o({tagName:t,disabled:m,...h}),g=j;return(0,l.jsx)(g,{...x,...h,ref:a,disabled:m,className:r()(u,f,i&&"active",c&&"".concat(f,"-").concat(c),n&&"".concat(f,"-").concat(n),h.href&&m&&"disabled")})}));m.displayName="Button";const u=m},13162:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=7580.2592ab11.chunk.js.map