"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6352],{57632:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var r=a(72791),l=(a(13162),a(78983)),d=a(59565),i=(a(77632),a(11087)),t=a(88898),c=a(29627),n=a(80184);const o=()=>{const{user:e}=(0,r.useContext)(t.S),s=e.userId,[a,o]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0),[u,j]=(0,r.useState)(null),[x,p]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),[_,A]=(0,r.useState)(!1),[N,b]=(0,r.useState)(""),[v,w]=(0,r.useState)(""),[y,C]=(0,r.useState)({name:"",email:"",password:"",contact:"",address:"",status:"",role:"",firmId:""}),F=async()=>{try{const e=await fetch((e=>"http://20.235.178.6:3007/api/users/users_added_by_user/".concat(e))(s));if(e.ok){const s=await e.json(),a=await Promise.all(s.data.map((async e=>{const s=await fetch((e=>"http://20.235.178.6:3007/api/users/total_bal_of_all_firms/".concat(e))(e.user_id)),a=await s.json();return{...e,currbal:a.data}})));o(a)}else console.error("Failed to fetch users")}catch(e){console.error("Error fetching users:",e)}finally{h(!1)}};(0,r.useEffect)((()=>{F(),x||(b(""),w(""))}),[s,x]);const O=async e=>{console.log("Fetching user details for:",e);try{const a=await fetch((s=e.user_id,"http://20.235.178.6:3007/api/users/user_details/".concat(s)));if(a.ok){const s=await a.json();C({name:s.data.usr_name,email:s.data.usr_email,password:s.data.usr_password,contact:s.data.usr_contact||"",address:s.data.usr_address,status:"Active"===s.data.usr_status?"1":"0",role:s.data.usr_role,firmId:e.firm_name}),j(e)}else console.error("Failed to fetch user details")}catch(a){console.error("Error fetching user details:",a)}var s};return m?(0,n.jsx)("p",{children:"Loading..."}):(0,n.jsxs)("div",{children:[(0,n.jsx)(d.gV,{}),(0,n.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,n.jsx)(d.Pm,{}),(0,n.jsx)("div",{className:"body flex-grow-1 px-3 px-md-2",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.rb,{className:"justify-content-center mb-3",children:(0,n.jsx)(l.b7,{className:"col-md-12",children:(0,n.jsxs)(l.xH,{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,n.jsxs)(l.rb,{className:"align-items-center",children:[(0,n.jsx)(l.b7,{style:{marginLeft:"11px"},children:(0,n.jsxs)(l.rb,{className:"allfirms_icon_title_row align-items-center",children:[(0,n.jsx)(l.b7,{className:"col-2 col-md-1",children:(0,n.jsx)("img",{className:"sidebar_icon_color",src:c,width:25,height:25,alt:"All Firms Logo"})}),(0,n.jsx)(l.b7,{className:"col-9 col-md-9",children:(0,n.jsx)("h5",{className:"title_font mb-0",style:{color:"white"},children:"All Users"})})]})}),(0,n.jsx)(l.b7,{className:"col-6 facc_crea_but_col",children:(0,n.jsx)(i.rU,{to:"/add_users",children:(0,n.jsx)(l.u5,{id:"but_color",className:"m-0",children:"Add New User"})})})]}),(0,n.jsx)(l.rb,{className:"allfirms_table_row py-5 px-1",children:(0,n.jsxs)(l.Sx,{hover:!0,responsive:!0,className:"custom-table",children:[(0,n.jsx)(l.V,{className:"custom-table-header",children:(0,n.jsxs)(l.T6,{children:[(0,n.jsx)(l.is,{id:"sss",children:"Sr. No."}),(0,n.jsx)(l.is,{id:"sss",children:"Name"}),(0,n.jsx)(l.is,{id:"sss",children:"Address"}),(0,n.jsx)(l.is,{id:"sss",children:"Email Id"}),(0,n.jsx)(l.is,{id:"sss",children:"Assigned Firm"}),(0,n.jsx)(l.is,{id:"sss",children:"Curr. Balance"}),(0,n.jsx)(l.is,{id:"sss",children:"Action"}),(0,n.jsx)(l.is,{id:"sss",children:"Details"})]})}),(0,n.jsx)(l.NR,{children:a.map(((e,s)=>(0,n.jsxs)(l.T6,{children:[(0,n.jsx)(l.NN,{children:s+1}),(0,n.jsx)(l.NN,{children:e.usr_name}),(0,n.jsx)(l.NN,{children:e.usr_address}),(0,n.jsx)(l.NN,{children:e.usr_email}),(0,n.jsx)(l.NN,{children:e.firm_name}),(0,n.jsx)(l.NN,{children:e.currbal}),(0,n.jsxs)(l.NN,{children:[(0,n.jsx)(l.u5,{color:"warning",size:"sm",className:"me-2",onClick:()=>{O(e),p(!0)},children:"Edit"}),(0,n.jsx)(l.u5,{color:"danger",size:"sm",onClick:()=>(e=>{j(e),A(!0)})(e),children:"Delete"})]}),(0,n.jsx)(l.NN,{children:(0,n.jsx)(l.u5,{color:"info",size:"sm",onClick:()=>{O(e),f(!0)},children:"View"})})]},e.user_id)))})]})})]})})})})})]}),(0,n.jsxs)(l.Tk,{visible:x,onClose:()=>p(!1),children:[(0,n.jsx)(l.p0,{closeButton:!0,children:(0,n.jsx)(l.fl,{children:"Edit User Details"})}),(0,n.jsx)(l.sD,{children:(0,n.jsxs)(l.lx,{children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"name",children:"Name"}),(0,n.jsx)(l.jO,{id:"name",value:y.name,onChange:e=>C({...y,name:e.target.value}),readOnly:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"email",children:"Email"}),(0,n.jsx)(l.jO,{id:"email",type:"email",value:y.email,onChange:e=>C({...y,email:e.target.value}),readOnly:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"password",children:"Password"}),(0,n.jsx)(l.jO,{id:"password",type:"password",value:y.password,onChange:e=>C({...y,password:e.target.value})})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"contact",children:"Contact"}),(0,n.jsx)(l.jO,{id:"contact",value:y.contact,onChange:e=>C({...y,contact:e.target.value})})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"address",children:"Address"}),(0,n.jsx)(l.jO,{id:"address",value:y.address,onChange:e=>C({...y,address:e.target.value})})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"firmId",children:"Assigned Firm"}),(0,n.jsx)(l.jO,{id:"firmId",value:y.firmId,onChange:e=>C({...y,firmId:e.target.value})})]})]})}),(0,n.jsxs)(l.Ym,{children:[(0,n.jsx)(l.u5,{color:"primary",onClick:async()=>{try{const r=await fetch((a=u.user_id,"http://20.235.178.6:3007/api/users/update_user_details/".concat(a)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:y.name,email:y.email,password:y.password,contact:y.contact,address:y.address,status:"1",role:"2"})}),l=await r.json();console.log("Update user: ",l);const d=await fetch((e=u.uf_id,"http://20.235.178.6:3007/api/users/update_firm_user/".concat(e)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:u.user_id,firm_id:y.firmId,added_by_user_id:s})}),i=await d.json();console.log("Update userFirm: ",i),r.ok&&d.ok?(b("User details updated successfully !!"),p(!1),h(!0),F()):(w("Something went wrong !!"),console.error("Failed to update user details or firm"))}catch(r){console.error("Error updating user details or firm:",r)}var e,a},children:"Save"}),(0,n.jsx)(l.u5,{color:"secondary",onClick:()=>p(!1),children:"Cancel"}),v&&(0,n.jsx)("div",{className:"text-danger mt-2 text-center",children:v}),N&&(0,n.jsx)("div",{className:"text-success mt-2 text-center",children:N})]})]}),(0,n.jsxs)(l.Tk,{visible:_,onClose:()=>A(!1),children:[(0,n.jsx)(l.p0,{closeButton:!0,children:(0,n.jsx)(l.fl,{children:u?"Delete User ".concat(u.usr_name):""})}),(0,n.jsx)(l.sD,{children:u&&(0,n.jsxs)("p",{children:["Are you sure you want to delete user ",u.usr_name,"?"]})}),(0,n.jsxs)(l.Ym,{children:[(0,n.jsx)(l.u5,{color:"danger",onClick:async()=>{try{(await fetch((e=u.uf_id,"http://20.235.178.6:3007/api/users/delete_firm_user/".concat(e)),{method:"DELETE"})).ok?(A(!1),h(!0),F()):(w("Failed to delete user !!"),console.error("Failed to delete user"))}catch(s){console.error("Error deleting user:",s)}var e},children:"Delete"}),(0,n.jsx)(l.u5,{color:"secondary",onClick:()=>A(!1),children:"Cancel"})]})]}),(0,n.jsxs)(l.Tk,{visible:g,onClose:()=>f(!1),children:[(0,n.jsx)(l.p0,{closeButton:!0,children:(0,n.jsx)(l.fl,{children:"User Details"})}),(0,n.jsx)(l.sD,{children:(0,n.jsxs)(l.lx,{children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"name",children:"Name"}),(0,n.jsx)(l.jO,{id:"name",value:y.name,onChange:e=>C({...y,name:e.target.value}),readOnly:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"email",children:"Email"}),(0,n.jsx)(l.jO,{id:"email",type:"email",value:y.email,onChange:e=>C({...y,email:e.target.value}),readOnly:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"password",children:"Password"}),(0,n.jsx)(l.jO,{id:"password",type:"password",value:y.password,onChange:e=>C({...y,password:e.target.value}),readOnly:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"contact",children:"Contact"}),(0,n.jsx)(l.jO,{id:"contact",value:y.contact,onChange:e=>C({...y,contact:e.target.value}),readOnly:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"address",children:"Address"}),(0,n.jsx)(l.jO,{id:"address",value:y.address,onChange:e=>C({...y,address:e.target.value}),readOnly:!0})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)(l.L8,{htmlFor:"firmId",children:"Assigned Firm"}),(0,n.jsx)(l.jO,{id:"firmId",value:y.firmId,onChange:e=>C({...y,firmId:e.target.value}),readOnly:!0})]})]})})]})]})}},13162:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=6352.953deda5.chunk.js.map