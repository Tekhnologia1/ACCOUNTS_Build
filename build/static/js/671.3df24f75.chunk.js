"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[671],{65938:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(65043),r=t(42645),l=t(85049),o=t(61072),c=t(78602),n=t(68155),i=t(67006),d=t(1433),m=t(86311),A=t(35475),h=t(59395),u=(t(20971),t(70579));const x=()=>{const{user:e}=(0,a.useContext)(h.R),s=e.userId,[t,x]=(0,a.useState)(""),[j,f]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[y,_]=(0,a.useState)(""),[b,w]=(0,a.useState)(""),[N,v]=(0,a.useState)(""),[C,S]=(0,a.useState)([]),[E,F]=(0,a.useState)(""),[U,T]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{try{const e=await fetch("http://13.126.48.224:3007/api/users/get_all_firms_by_user/".concat(s));if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();console.log(t.data),S(t.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[s]);const I=async e=>{try{if(!(await fetch("http://13.126.48.224:3007/api/users/assign_firm_to_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,firm_id:N,added_by_user_id:s})})).ok)throw new Error("Failed to assign firm to user");F("User is added with assigned firm !!")}catch(t){console.error("Error assigning firm to user:",t),T("Failed to assign firm. Please try again."),F("")}};return(0,u.jsxs)("div",{children:[(0,u.jsx)(r.ay,{}),(0,u.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,u.jsx)(r.DH,{}),(0,u.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(o.A,{className:"justify-content-center mb-3",children:(0,u.jsx)(c.A,{xs:12,children:(0,u.jsxs)("div",{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,u.jsxs)(o.A,{className:"allfirms_title_mainrow",children:[(0,u.jsx)(c.A,{xs:9,style:{marginLeft:"10px"},children:(0,u.jsxs)(o.A,{className:"allfirms_title_row py-1 align-items-center",children:[(0,u.jsx)(c.A,{xs:1,children:(0,u.jsx)("img",{src:l,width:25,height:25,alt:"All Firms Logo"})}),(0,u.jsx)(c.A,{xs:4,children:(0,u.jsx)("h4",{children:"Add Users"})})]})}),(0,u.jsx)(c.A,{xs:2,className:"align-content-center justify-content-end",children:(0,u.jsx)(A.N_,{to:"/all_users",children:(0,u.jsx)(n.A,{id:"but_color",children:"All Users"})})})]}),(0,u.jsx)(o.A,{className:"allfirms_table_row py-5 justify-content-center",children:(0,u.jsx)(c.A,{xs:12,md:6,children:(0,u.jsxs)(i.A,{children:[(0,u.jsx)(d.A,{className:"mb-3",controlId:"formName",children:(0,u.jsx)(m.A,{type:"text",placeholder:"Name",value:t,onChange:e=>x(e.target.value)})}),(0,u.jsx)(d.A,{className:"mb-3",controlId:"formEmail",children:(0,u.jsx)(m.A,{type:"email",placeholder:"Email",value:j,onChange:e=>f(e.target.value)})}),(0,u.jsx)(d.A,{className:"mb-3",controlId:"formPassword",children:(0,u.jsx)(m.A,{type:"password",placeholder:"Password",value:g,onChange:e=>p(e.target.value)})}),(0,u.jsx)(d.A,{className:"mb-3",controlId:"formContact",children:(0,u.jsx)(m.A,{type:"text",placeholder:"Contact",value:y,onChange:e=>_(e.target.value)})}),(0,u.jsx)(d.A,{className:"mb-3",controlId:"formAddress",children:(0,u.jsx)(m.A,{type:"text",placeholder:"Address",value:b,onChange:e=>w(e.target.value)})}),(0,u.jsx)(d.A,{className:"mb-3",controlId:"formStatus",children:(0,u.jsx)(m.A,{type:"text",placeholder:"Status",disabled:!0,value:"Active"})}),(0,u.jsxs)(i.A.Group,{as:o.A,className:"mb-3",controlId:"formFirmName",children:[(0,u.jsx)(i.A.Label,{column:!0,sm:3,children:"Firm Name"}),(0,u.jsx)(c.A,{sm:9,children:(0,u.jsxs)(i.A.Control,{as:"select",value:N,className:"form-select",onChange:e=>v(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select Firm"}),C.map((e=>(0,u.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})})]}),(0,u.jsxs)(o.A,{className:"justify-content-center align-content-center",children:[(0,u.jsx)(n.A,{onClick:async()=>{try{const e=await fetch("http://13.126.48.224:3007/api/users/add_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:j,password:g,contact:y,address:b,status:"1",role:"2"})});if(!e.ok)throw new Error("Failed to add user");{const s=await e.json();await I(s.data),F("User added successfully!"),T(""),setTimeout((()=>{window.location.reload()}),1e3)}}catch(e){console.error("Error adding user:",e),T("Failed to add user. Please try again."),F(""),setTimeout((()=>{window.location.reload()}),1e3)}},className:"col-md-3",id:"but_color",children:"Save"}),U&&(0,u.jsx)("div",{className:"text-danger mt-2 text-center",children:U}),E&&(0,u.jsx)("div",{className:"text-success mt-2 text-center",children:E})]})]})})})]})})})})})]})]})}},85049:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=671.3df24f75.chunk.js.map