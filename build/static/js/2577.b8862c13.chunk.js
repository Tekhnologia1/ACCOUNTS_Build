"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2577],{17598:(e,s,t)=>{t.d(s,{T:()=>a});const a="http://65.0.139.50:3007"},8716:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(65043),r=t(53519),c=t(61072),n=t(78602),l=t(88258),o=t(68155),i=t(67006),d=t(1433),m=t(42780),A=t(86311),h=t(70702),u=t(35475),x=t(85049),j=t(59395),f=t(17598),g=t(42645),_=t(70579);const p=()=>{const{user:e}=(0,a.useContext)(j.R),s=e.userId,[t,p]=(0,a.useState)([]),[y,b]=(0,a.useState)([]),[w,C]=(0,a.useState)(""),[N,v]=(0,a.useState)(""),[E,S]=(0,a.useState)([]),[T,F]=(0,a.useState)([]),[k,P]=(0,a.useState)(""),[I,U]=(0,a.useState)(""),[B,L]=(0,a.useState)(""),[M,Q]=(0,a.useState)(!1),[K,X]=(0,a.useState)(!1),[J,O]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(f.T,"/api/users/get_all_firms_by_user/").concat(s));if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();p(t.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[s]),(0,a.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(f.T,"/api/users/get_all_firms_by_adding_user/").concat(s));if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();b(t.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[s]);const R=async e=>{try{const s=await fetch("".concat(f.T,"/api/users/get_general_ledgers/").concat(e));if(!s.ok)throw new Error("Failed to fetch data");return(await s.json()).data}catch(s){console.error("Error fetching data:",s)}};(0,a.useEffect)((()=>{(async()=>{if(w){Q(!0);const e=await R(w);S(e),Q(!1)}})()}),[w]),(0,a.useEffect)((()=>{(async()=>{if(N){X(!0);const e=await R(N);F(e),X(!1)}})()}),[N]);return(0,_.jsxs)("div",{children:[(0,_.jsx)(g.PM,{}),(0,_.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,_.jsx)(g.au,{}),(0,_.jsx)(r.A,{fluid:!0,className:"flex-grow-1 px-3 px-md-5",children:(0,_.jsx)(c.A,{className:"justify-content-center mb-3",children:(0,_.jsx)(n.A,{md:12,children:(0,_.jsxs)(l.A,{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,_.jsxs)(c.A,{className:"allfirms_title_mainrow",children:[(0,_.jsx)(n.A,{md:9,style:{marginLeft:"10px"},children:(0,_.jsxs)(c.A,{className:"allfirms_title_row py-1 align-items-center",children:[(0,_.jsx)(n.A,{md:1,children:(0,_.jsx)("img",{className:"",src:x,width:25,height:25,alt:"AllFirms Logo"})}),(0,_.jsx)(n.A,{md:4,children:(0,_.jsx)("h4",{children:"Payments"})})]})}),(0,_.jsx)(n.A,{md:2,className:"d-flex align-items-center justify-content-end",children:(0,_.jsx)(u.N_,{to:"/user_allpayments",children:(0,_.jsx)(o.A,{id:"but_color",children:"All Payments"})})})]}),(0,_.jsx)(c.A,{className:"allfirms_table_row py-5 justify-content-center",children:(0,_.jsx)(n.A,{md:8,className:"mb-3 mb-md-0",children:(0,_.jsx)(c.A,{className:"justify-content-center",children:(0,_.jsxs)(n.A,{md:12,children:[(0,_.jsx)(l.A,{className:"bg_color_blue_white",children:(0,_.jsx)(l.A.Body,{children:(0,_.jsxs)(i.A,{children:[(0,_.jsx)(d.A,{className:"mb-3",controlId:"formTransactionID",children:(0,_.jsx)(m.A,{children:"Transaction :"})}),(0,_.jsxs)(d.A,{as:c.A,className:"mb-3",controlId:"formFrom",children:[(0,_.jsx)(m.A,{column:!0,sm:3,children:"From:"}),(0,_.jsx)(n.A,{sm:5,children:(0,_.jsxs)(i.A.Control,{as:"select",value:w,className:"form-select",onChange:e=>C(e.target.value),children:[(0,_.jsx)("option",{value:"",children:"Select Firm"}),t.map((e=>(0,_.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,_.jsxs)(n.A,{sm:4,children:[(0,_.jsxs)(i.A.Control,{as:"select",value:k,className:"form-select",onChange:e=>P(e.target.value),disabled:M,children:[(0,_.jsx)("option",{value:"",children:"Select Your Firm Account"}),E.map((e=>(0,_.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]}),M&&(0,_.jsx)("p",{children:"Loading..."})]})]}),(0,_.jsxs)(d.A,{as:c.A,className:"mb-3",controlId:"formTo",children:[(0,_.jsx)(m.A,{column:!0,sm:3,children:"To:"}),(0,_.jsx)(n.A,{sm:5,children:(0,_.jsxs)(i.A.Control,{as:"select",value:N,className:"form-select",onChange:e=>v(e.target.value),children:[(0,_.jsx)("option",{value:"",children:"Select Firm"}),y.map((e=>(0,_.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,_.jsxs)(n.A,{sm:4,children:[(0,_.jsxs)(i.A.Control,{as:"select",value:I,className:"form-select",onChange:e=>U(e.target.value),disabled:K,children:[(0,_.jsx)("option",{value:"",children:"Select Your Firm Account"}),T.map((e=>(0,_.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]}),K&&(0,_.jsx)("p",{children:"Loading..."})]})]}),(0,_.jsxs)(d.A,{as:c.A,className:"mb-3",controlId:"formAmount",children:[(0,_.jsx)(m.A,{column:!0,sm:3,children:"Amount :"}),(0,_.jsx)(n.A,{sm:5,children:(0,_.jsx)(A.A,{type:"text",placeholder:"Amount",value:B,onChange:e=>L(e.target.value)})})]})]})})}),(0,_.jsx)(c.A,{className:"justify-content-center mt-3",children:(0,_.jsx)(o.A,{className:"col-md-3 col-6",id:"but_color",onClick:async()=>{O(!0)},children:"Pay"})})]})})})})]})})})})]}),(0,_.jsxs)(h.A,{show:J,onHide:()=>O(!1),centered:!0,children:[(0,_.jsx)(h.A.Header,{closeButton:!0,children:(0,_.jsx)(h.A.Title,{children:"Confirm Payment"})}),(0,_.jsx)(h.A.Body,{children:"Are you sure you want to proceed with this payment?"}),(0,_.jsxs)(h.A.Footer,{children:[(0,_.jsx)(o.A,{variant:"secondary",onClick:()=>O(!1),children:"Cancel"}),(0,_.jsx)(o.A,{variant:"primary",onClick:async()=>{try{const e={from_gl_id:k,to_gl_id:I,amount:Number(B),from_firm_id:w,to_firm_id:N},t=await fetch("".concat(f.T,"/api/users/payment/").concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to process payment");const a=await t.json();console.log(a),alert("Payment successful"),O(!1)}catch(e){console.error("Error processing payment:",e),alert("Payment failed")}},children:"Confirm Payment"})]})]})]})}},85049:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=2577.b8862c13.chunk.js.map