{"version":3,"file":"static/js/7241.a50c5e32.chunk.js","mappings":"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","sources":["views/admin/Users/Add_Users.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { AdminHeader, AdminSidebar } from 'src/components';\r\nimport AllFirms_logo from 'src/assets/images/admin_dashboard_icons/AllFirms.png';\r\nimport { Form, FormControl, FormGroup, Row, Col, Button } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContext } from 'src/context/UserContextProvider';\r\nimport 'src/scss/_custom.scss';\r\n\r\nconst ADD_USER_API_URL = 'http://65.1.108.30:3007/api/users/add_user';\r\nconst ASSIGN_FIRM_API_URL = 'http://65.1.108.30:3007/api/users/assign_firm_to_user';\r\n\r\nconst Add_Users = () => {\r\n  const { user } = useContext(UserContext);\r\n  const userId = user.userId;\r\n\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [contact, setContact] = useState('');\r\n  const [address, setAddress] = useState('');\r\n  const status = \"1\"; // Hardcoded status\r\n  const role = \"2\"; // Assuming '2' is the role for the user being added\r\n  const [selectedFirmId, setSelectedFirmId] = useState('');\r\n  const [firms, setFirms] = useState([]);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // Fetch firms for the dropdown\r\n  useEffect(() => {\r\n    const fetchFirms = async () => {\r\n      try {\r\n        const response = await fetch(`http://65.1.108.30:3007/api/users/get_all_firms_by_user/${userId}`);\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch data');\r\n        }\r\n        const resdata = await response.json();\r\n        console.log(resdata.data);\r\n\r\n        setFirms(resdata.data);\r\n      } catch (error) {\r\n        console.error('Error fetching firms:', error);\r\n      }\r\n    };\r\n\r\n    fetchFirms();\r\n  }, [userId]);\r\n\r\n  const handleAddUser = async () => {\r\n    try {\r\n      const response = await fetch(ADD_USER_API_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          name,\r\n          email,\r\n          password,\r\n          contact,\r\n          address,\r\n          status,\r\n          role\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const newUser = await response.json();\r\n        await assignFirmToUser(newUser.data);\r\n        setSuccessMessage('User added successfully!');\r\n        setErrorMessage('');\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n      }, 1000);\r\n      } else {\r\n        throw new Error('Failed to add user');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding user:', error);\r\n      setErrorMessage('Failed to add user. Please try again.');\r\n      setSuccessMessage('');\r\n      setTimeout(() => {\r\n        window.location.reload();\r\n    }, 1000);\r\n    }\r\n  };\r\n\r\n  const assignFirmToUser = async (added_user_id) => {\r\n    try {\r\n      const response = await fetch(ASSIGN_FIRM_API_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          user_id: added_user_id,\r\n          firm_id: selectedFirmId,\r\n          added_by_user_id: userId\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to assign firm to user');\r\n      } else {\r\n        setSuccessMessage('User is added with assigned firm !!');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error assigning firm to user:', error);\r\n      setErrorMessage('Failed to assign firm. Please try again.');\r\n      setSuccessMessage('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <AdminSidebar />\r\n      <div className=\"wrapper d-flex flex-column min-vh-100 bg-light\">\r\n        <AdminHeader />\r\n        <div className=\"body flex-grow-1 px-3\">\r\n          <>\r\n            <Row className=\"justify-content-center mb-3\">\r\n              <Col xs={12}>\r\n                <div className=\"card_border_color_change py-5\" style={{ borderColor: \"white\" }}>\r\n                  <Row className=\"allfirms_title_mainrow\">\r\n                    <Col xs={9} style={{ marginLeft: \"10px\" }}>\r\n                      <Row className=\"allfirms_title_row py-1 align-items-center\">\r\n                        <Col xs={1}>\r\n                          <img src={AllFirms_logo} width={25} height={25} alt=\"All Firms Logo\" />\r\n                        </Col>\r\n                        <Col xs={4}>\r\n                          <h4>Add Users</h4>\r\n                        </Col>\r\n                      </Row>\r\n                    </Col>\r\n                    <Col xs={2} className=\"align-content-center justify-content-end\">\r\n                      <Link to={'/all_users'}>\r\n                        <Button id=\"but_color\">\r\n                          All Users\r\n                        </Button>\r\n                      </Link>\r\n                    </Col>\r\n                  </Row>\r\n\r\n                  <Row className=\"allfirms_table_row py-5 justify-content-center\">\r\n                    <Col xs={12} md={6}>\r\n                      <Form>\r\n                        <FormGroup className=\"mb-3\" controlId=\"formName\">\r\n                          <FormControl\r\n                            type=\"text\"\r\n                            placeholder=\"Name\"\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                          />\r\n                        </FormGroup>\r\n\r\n                        <FormGroup className=\"mb-3\" controlId=\"formEmail\">\r\n                          <FormControl\r\n                            type=\"email\"\r\n                            placeholder=\"Email\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                          />\r\n                        </FormGroup>\r\n\r\n                        <FormGroup className=\"mb-3\" controlId=\"formPassword\">\r\n                          <FormControl\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                          />\r\n                        </FormGroup>\r\n\r\n                        <FormGroup className=\"mb-3\" controlId=\"formContact\">\r\n                          <FormControl\r\n                            type=\"text\"\r\n                            placeholder=\"Contact\"\r\n                            value={contact}\r\n                            onChange={(e) => setContact(e.target.value)}\r\n                          />\r\n                        </FormGroup>\r\n\r\n                        <FormGroup className=\"mb-3\" controlId=\"formAddress\">\r\n                          <FormControl\r\n                            type=\"text\"\r\n                            placeholder=\"Address\"\r\n                            value={address}\r\n                            onChange={(e) => setAddress(e.target.value)}\r\n                          />\r\n                        </FormGroup>\r\n\r\n                        <FormGroup className=\"mb-3\" controlId=\"formStatus\">\r\n                          <FormControl\r\n                            type=\"text\"\r\n                            placeholder=\"Status\"\r\n                            disabled\r\n                            value=\"Active\"\r\n                          />\r\n                        </FormGroup>\r\n\r\n                        <Form.Group as={Row} className=\"mb-3\" controlId=\"formFirmName\">\r\n                          <Form.Label column sm={3}>Firm Name</Form.Label>\r\n                          <Col sm={9}>\r\n                            <Form.Control as=\"select\" value={selectedFirmId} className='form-select' onChange={(e) => setSelectedFirmId(e.target.value)}>\r\n                              <option value=\"\">Select Firm</option>\r\n                              {firms.map((firm) => (\r\n                                <option key={firm.firm_id} value={firm.firm_id}>\r\n                                  {firm.firm_name}\r\n                                </option>\r\n                              ))}\r\n                            </Form.Control>\r\n                          </Col>\r\n                        </Form.Group>\r\n\r\n                        <Row className=\"justify-content-center align-content-center\">\r\n                          <Button onClick={handleAddUser} className='col-md-3' id='but_color'>Save</Button>\r\n                          {errorMessage && <div className=\"text-danger mt-2 text-center\">{errorMessage}</div>}\r\n                          {successMessage && <div className=\"text-success mt-2 text-center\">{successMessage}</div>}\r\n                        </Row>\r\n                      </Form>\r\n                    </Col>\r\n                  </Row>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Add_Users;\r\n"],"names":["Add_Users","user","useContext","UserContext","userId","name","setName","useState","email","setEmail","password","setPassword","contact","setContact","address","setAddress","selectedFirmId","setSelectedFirmId","firms","setFirms","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","async","response","fetch","concat","ok","Error","resdata","json","console","log","data","error","fetchFirms","assignFirmToUser","method","headers","body","JSON","stringify","user_id","added_user_id","firm_id","added_by_user_id","_jsxs","children","_jsx","AdminSidebar","className","AdminHeader","_Fragment","Row","Col","xs","style","borderColor","marginLeft","src","AllFirms_logo","width","height","alt","Link","to","Button","id","md","Form","FormGroup","controlId","FormControl","type","placeholder","value","onChange","e","target","disabled","Group","as","Label","column","sm","Control","map","firm","firm_name","onClick","status","role","newUser","setTimeout","window","location","reload"],"sourceRoot":""}