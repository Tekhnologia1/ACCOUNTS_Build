"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2598],{25407:(e,t,s)=>{s.d(t,{Y:()=>a});const a="http://20.235.178.6:3007"},2598:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(72791),r=s(78983),c=s(59565),n=s(33821),l=s(323),o=s(89743),i=s(2677),d=s(74292),m=s(28282),f=s(62591),h=s(88898),x=s(25407),j=s(59513),p=s.n(j),u=(s(68639),s(37897)),b=s(80184);const y=()=>{const{user:e}=(0,a.useContext)(h.S),t=e.userId,[s,j]=(0,a.useState)([]),[y,_]=(0,a.useState)(""),[N,v]=(0,a.useState)([]),[g,w]=(0,a.useState)(!1),[Z,F]=(0,a.useState)(null),[k,C]=(0,a.useState)(!0),[S,E]=(0,a.useState)(new Date),[I,D]=(0,a.useState)(new Date),[R,T]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(x.Y,"/api/users/get_all_firms_by_user/").concat(t));if(!e.ok)throw new Error("Failed to fetch firms");const s=await e.json();j(s.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[t]),(0,a.useEffect)((()=>{L()}),[y,S,I]);const L=async()=>{w(!0);try{let e;if(y){const t=y;e="".concat(x.Y,"/api/users/show_firm_all_transactions/").concat(t,"/transactions"),T("type")}else e="".concat(x.Y,"/api/users/show_day_book_transactions/").concat(t),T("trans_type");const s=S.toLocaleDateString("en-CA"),a=new Date(I);a.setDate(a.getDate()+1);const r=a.toLocaleDateString("en-CA");e+="?startDate=".concat(s,"&endDate=").concat(r);const c=await fetch(e),n=await c.json();if(!c.ok||!1===n.status)return C(!1),void v([]);v(n.data),console.log(n.data),C(n.data.length>0)}catch(e){console.error("Error fetching transactions:",e),C(!1)}finally{w(!1)}};return(0,a.useEffect)((()=>{(async()=>{if(y)try{const e=y,t=await fetch("".concat(x.Y,"/api/users/firm_total_bal/").concat(e));if(!t.ok)throw new Error("Failed to fetch total balance");const s=await t.json();F(s.data.totalBalance)}catch(e){console.error("Error fetching total balance:",e)}})()}),[y]),(0,b.jsxs)("div",{children:[(0,b.jsx)(c.LC,{}),(0,b.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,b.jsx)(c.WW,{}),(0,b.jsx)("div",{className:"body flex-grow-1 px-2",children:(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(r.rb,{className:"justify-content-center mb-3",children:(0,b.jsx)(r.b7,{className:"col-md-12",children:(0,b.jsxs)(r.xH,{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,b.jsx)(r.rb,{className:"align-items-center",children:(0,b.jsx)(r.b7,{style:{marginLeft:"11px"},className:"col-10",children:(0,b.jsxs)(r.rb,{className:"allfirms_icon_title_row align-items-center",children:[(0,b.jsx)(r.b7,{className:"col-2 col-md-1",children:(0,b.jsx)("img",{className:"sidebar_icon_color",src:u,width:25,height:25,alt:"All Firms Logo"})}),(0,b.jsx)(r.b7,{className:"col-7 col-md-7",children:(0,b.jsx)("h5",{className:"title_font mb-0",style:{color:"white"},children:"Transactions"})})]})})}),(0,b.jsx)(r.rb,{className:"allfirms_table_row py-5 justify-content-center",children:(0,b.jsxs)(r.b7,{children:[(0,b.jsxs)(r.rb,{className:"justify-content-center mb-3",children:[(0,b.jsx)(r.b7,{className:"justify-content-start justify-content-md-start facc_sel_firm_col",children:(0,b.jsx)(n.Z,{children:(0,b.jsx)(l.Z,{as:o.Z,className:"mb-3",children:(0,b.jsx)(i.Z,{md:11,className:"justify-content-start justify-content-md-start",children:(0,b.jsxs)(d.Z,{as:"select",value:y,className:"form-select",onChange:e=>_(e.target.value),style:{maxWidth:"100%"},children:[(0,b.jsx)("option",{value:"",children:"Select Firm"}),s.map((e=>(0,b.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})})})})}),(0,b.jsx)(r.b7,{className:"d-flex align-items-center justify-content-center justify-content-md-end mt-0 mt-md-0 facc_f_bal",children:null!==Z&&(0,b.jsxs)("div",{style:{backgroundColor:"green",color:"white",padding:"10px",borderRadius:"5px"},children:["Firm Total Balance: ",Z]})})]}),(0,b.jsx)(r.rb,{className:"justify-content-center mb-3",children:(0,b.jsxs)(r.b7,{className:"allpay_datefil_col",children:[(0,b.jsx)(p(),{selected:S,onChange:e=>E(e||new Date),selectsStart:!0,startDate:S,endDate:I,placeholderText:"Start Date",className:"form-control allpay_datefil",md:2}),(0,b.jsx)(p(),{selected:I,onChange:e=>D(e||new Date),selectsEnd:!0,startDate:S,endDate:I,minDate:S,placeholderText:"End Date",className:"form-control allpay_datefil",md:2}),(0,b.jsx)(r.u5,{onClick:L,id:"fil_but_color",className:"mt-0 allpay_datefil_but",children:"Filter"})]})}),(0,b.jsx)(r.rb,{children:(0,b.jsx)(i.Z,{md:12,children:(0,b.jsx)(n.Z,{children:(0,b.jsxs)(m.Z,{className:"mb-3",children:[(0,b.jsx)(m.Z.Header,{className:"text-white",id:"bg__color",children:"Firm Transactions"}),(0,b.jsx)(m.Z.Body,{children:g?(0,b.jsx)("p",{children:"Loading..."}):k?(0,b.jsxs)(f.Z,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Sr.No"}),(0,b.jsx)("th",{children:"Transaction of Firm"}),(0,b.jsx)("th",{children:"From/To"}),(0,b.jsx)("th",{children:"Transaction with Firm"}),(0,b.jsx)("th",{children:"Cr/Dr Amount"}),(0,b.jsx)("th",{children:"Date"}),(0,b.jsx)("th",{children:"Remark"})]})}),(0,b.jsx)("tbody",{children:N.map(((e,t)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:t+1}),"payment"===e[R]?(0,b.jsxs)("td",{children:[e.from_firm_name," - ",e.from_gl_name]}):(0,b.jsxs)("td",{children:[e.to_firm_name," - ",e.to_gl_name]}),"payment"===e[R]?(0,b.jsx)("td",{style:{fontWeight:"500"},children:"To"}):(0,b.jsx)("td",{style:{fontWeight:"500"},children:"From"}),"payment"===e[R]?(0,b.jsxs)("td",{children:[e.to_firm_name," - ",e.to_gl_name]}):(0,b.jsxs)("td",{children:[e.from_firm_name," - ",e.from_gl_name]}),(0,b.jsxs)("td",{style:{color:"payment"===e[R]?"red":"green"},children:["payment"===e[R]?"-":"+",e.amount]}),(0,b.jsx)("td",{children:new Date(e.transaction_date).toLocaleString()}),(0,b.jsx)("td",{children:e.remark})]},e.transaction_id)))})]}):(0,b.jsx)("p",{children:"No Transactions for this firm"})})]})})})})]})})]})})})})})]})]})}},70783:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(81694),r=s.n(a),c=s(72791),n=s(52007),l=s.n(n),o=s(80184);const i={type:l().string,tooltip:l().bool,as:l().elementType},d=c.forwardRef(((e,t)=>{let{as:s="div",className:a,type:c="valid",tooltip:n=!1,...l}=e;return(0,o.jsx)(s,{...l,ref:t,className:r()(a,"".concat(c,"-").concat(n?"tooltip":"feedback"))})}));d.displayName="Feedback",d.propTypes=i;const m=d},33821:(e,t,s)=>{s.d(t,{Z:()=>L});var a=s(81694),r=s.n(a),c=s(52007),n=s.n(c),l=s(72791),o=s(70783),i=s(96882),d=s(84934),m=s(10162),f=s(80184);const h=l.forwardRef(((e,t)=>{let{bsPrefix:s,className:a,htmlFor:c,...n}=e;const{controlId:o}=(0,l.useContext)(d.Z);return s=(0,m.vE)(s,"form-check-label"),(0,f.jsx)("label",{...n,ref:t,htmlFor:c||o,className:r()(a,s)})}));h.displayName="FormCheckLabel";const x=h;var j=s(11701);const p=l.forwardRef(((e,t)=>{let{id:s,bsPrefix:a,bsSwitchPrefix:c,inline:n=!1,reverse:h=!1,disabled:p=!1,isValid:u=!1,isInvalid:b=!1,feedbackTooltip:y=!1,feedback:_,feedbackType:N,className:v,style:g,title:w="",type:Z="checkbox",label:F,children:k,as:C="input",...S}=e;a=(0,m.vE)(a,"form-check"),c=(0,m.vE)(c,"form-switch");const{controlId:E}=(0,l.useContext)(d.Z),I=(0,l.useMemo)((()=>({controlId:s||E})),[E,s]),D=!k&&null!=F&&!1!==F||(0,j.XW)(k,x),R=(0,f.jsx)(i.Z,{...S,type:"switch"===Z?"checkbox":Z,ref:t,isValid:u,isInvalid:b,disabled:p,as:C});return(0,f.jsx)(d.Z.Provider,{value:I,children:(0,f.jsx)("div",{style:g,className:r()(v,D&&a,n&&"".concat(a,"-inline"),h&&"".concat(a,"-reverse"),"switch"===Z&&c),children:k||(0,f.jsxs)(f.Fragment,{children:[R,D&&(0,f.jsx)(x,{title:w,children:F}),_&&(0,f.jsx)(o.Z,{type:N,tooltip:y,children:_})]})})})}));p.displayName="FormCheck";const u=Object.assign(p,{Input:i.Z,Label:x});var b=s(74292);const y=l.forwardRef(((e,t)=>{let{className:s,bsPrefix:a,as:c="div",...n}=e;return a=(0,m.vE)(a,"form-floating"),(0,f.jsx)(c,{ref:t,className:r()(s,a),...n})}));y.displayName="FormFloating";const _=y;var N=s(323),v=s(53392);const g=l.forwardRef(((e,t)=>{let{bsPrefix:s,className:a,id:c,...n}=e;const{controlId:o}=(0,l.useContext)(d.Z);return s=(0,m.vE)(s,"form-range"),(0,f.jsx)("input",{...n,type:"range",ref:t,className:r()(a,s),id:c||o})}));g.displayName="FormRange";const w=g,Z=l.forwardRef(((e,t)=>{let{bsPrefix:s,size:a,htmlSize:c,className:n,isValid:o=!1,isInvalid:i=!1,id:h,...x}=e;const{controlId:j}=(0,l.useContext)(d.Z);return s=(0,m.vE)(s,"form-select"),(0,f.jsx)("select",{...x,size:c,ref:t,className:r()(n,s,a&&"".concat(s,"-").concat(a),o&&"is-valid",i&&"is-invalid"),id:h||j})}));Z.displayName="FormSelect";const F=Z,k=l.forwardRef(((e,t)=>{let{bsPrefix:s,className:a,as:c="small",muted:n,...l}=e;return s=(0,m.vE)(s,"form-text"),(0,f.jsx)(c,{...l,ref:t,className:r()(a,s,n&&"text-muted")})}));k.displayName="FormText";const C=k,S=l.forwardRef(((e,t)=>(0,f.jsx)(u,{...e,ref:t,type:"switch"})));S.displayName="Switch";const E=Object.assign(S,{Input:u.Input,Label:u.Label}),I=l.forwardRef(((e,t)=>{let{bsPrefix:s,className:a,children:c,controlId:n,label:l,...o}=e;return s=(0,m.vE)(s,"form-floating"),(0,f.jsxs)(N.Z,{ref:t,className:r()(a,s),controlId:n,...o,children:[c,(0,f.jsx)("label",{htmlFor:n,children:l})]})}));I.displayName="FloatingLabel";const D=I,R={_ref:n().any,validated:n().bool,as:n().elementType},T=l.forwardRef(((e,t)=>{let{className:s,validated:a,as:c="form",...n}=e;return(0,f.jsx)(c,{...n,ref:t,className:r()(s,a&&"was-validated")})}));T.displayName="Form",T.propTypes=R;const L=Object.assign(T,{Group:N.Z,Control:b.Z,Floating:_,Check:u,Switch:E,Label:v.Z,Text:C,Range:w,Select:F,FloatingLabel:D})},96882:(e,t,s)=>{s.d(t,{Z:()=>d});var a=s(81694),r=s.n(a),c=s(72791),n=s(84934),l=s(10162),o=s(80184);const i=c.forwardRef(((e,t)=>{let{id:s,bsPrefix:a,className:i,type:d="checkbox",isValid:m=!1,isInvalid:f=!1,as:h="input",...x}=e;const{controlId:j}=(0,c.useContext)(n.Z);return a=(0,l.vE)(a,"form-check-input"),(0,o.jsx)(h,{...x,ref:t,type:d,id:s||j,className:r()(i,a,m&&"is-valid",f&&"is-invalid")})}));i.displayName="FormCheckInput";const d=i},84934:(e,t,s)=>{s.d(t,{Z:()=>a});const a=s(72791).createContext({})},74292:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(81694),r=s.n(a),c=s(72791),n=(s(42391),s(70783)),l=s(84934),o=s(10162),i=s(80184);const d=c.forwardRef(((e,t)=>{let{bsPrefix:s,type:a,size:n,htmlSize:d,id:m,className:f,isValid:h=!1,isInvalid:x=!1,plaintext:j,readOnly:p,as:u="input",...b}=e;const{controlId:y}=(0,c.useContext)(l.Z);return s=(0,o.vE)(s,"form-control"),(0,i.jsx)(u,{...b,type:a,size:d,ref:t,readOnly:p,id:m||y,className:r()(f,j?"".concat(s,"-plaintext"):s,n&&"".concat(s,"-").concat(n),"color"===a&&"".concat(s,"-color"),h&&"is-valid",x&&"is-invalid")})}));d.displayName="FormControl";const m=Object.assign(d,{Feedback:n.Z})},323:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(72791),r=s(84934),c=s(80184);const n=a.forwardRef(((e,t)=>{let{controlId:s,as:n="div",...l}=e;const o=(0,a.useMemo)((()=>({controlId:s})),[s]);return(0,c.jsx)(r.Z.Provider,{value:o,children:(0,c.jsx)(n,{...l,ref:t})})}));n.displayName="FormGroup";const l=n},53392:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(81694),r=s.n(a),c=s(72791),n=(s(42391),s(2677)),l=s(84934),o=s(10162),i=s(80184);const d=c.forwardRef(((e,t)=>{let{as:s="label",bsPrefix:a,column:d=!1,visuallyHidden:m=!1,className:f,htmlFor:h,...x}=e;const{controlId:j}=(0,c.useContext)(l.Z);a=(0,o.vE)(a,"form-label");let p="col-form-label";"string"===typeof d&&(p="".concat(p," ").concat(p,"-").concat(d));const u=r()(f,a,m&&"visually-hidden",d&&p);return h=h||j,d?(0,i.jsx)(n.Z,{ref:t,as:"label",className:u,htmlFor:h,...x}):(0,i.jsx)(s,{ref:t,className:u,htmlFor:h,...x})}));d.displayName="FormLabel";const m=d},62591:(e,t,s)=>{s.d(t,{Z:()=>o});var a=s(81694),r=s.n(a),c=s(72791),n=s(10162),l=s(80184);const o=c.forwardRef(((e,t)=>{let{bsPrefix:s,className:a,striped:c,bordered:o,borderless:i,hover:d,size:m,variant:f,responsive:h,...x}=e;const j=(0,n.vE)(s,"table"),p=r()(a,j,f&&"".concat(j,"-").concat(f),m&&"".concat(j,"-").concat(m),c&&"".concat(j,"-").concat("string"===typeof c?"striped-".concat(c):"striped"),o&&"".concat(j,"-bordered"),i&&"".concat(j,"-borderless"),d&&"".concat(j,"-hover")),u=(0,l.jsx)("table",{...x,className:p,ref:t});if(h){let e="".concat(j,"-responsive");return"string"===typeof h&&(e="".concat(e,"-").concat(h)),(0,l.jsx)("div",{className:e,children:u})}return u}))},42391:e=>{var t=function(){};e.exports=t}}]);
//# sourceMappingURL=2598.5d6a40a3.chunk.js.map