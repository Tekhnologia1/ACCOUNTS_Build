"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[765],{49214:(e,t,s)=>{s.d(t,{X:()=>c});s(72791);var a=s(12903),r=s(25407);const c=()=>({REGISTER:async e=>{try{return(await a.Z.post("".concat(r.Y,"/api/users/register"),e)).data}catch(t){throw console.log("Error registering:",t),t}},LOGIN:async e=>{try{return(await a.Z.post("".concat(r.Y,"/api/users/login"),e)).data}catch(t){throw console.log("Invalid credentials:",t),t}}})},25407:(e,t,s)=>{s.d(t,{Y:()=>a});const a="http://13.233.105.76:3007"},44331:(e,t,s)=>{s.d(t,{g:()=>a});s(12903).Z.create({baseURL:"http://192.168.1.69:3002"});class a{static isAuthenticated(){return null!==localStorage.getItem("token")}static login(e){localStorage.setItem("token",e)}static logout(){localStorage.removeItem("token")}static getUserData(){return localStorage.getItem("user")}}},80765:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var a=s(72791),r=s(47022),c=s(89743),n=s(2677),o=s(28282),l=s(33821),i=s(27098),d=s(16157);var u=s(57689),h=s(11087),g=s(44331),p=s(49214);class m extends Error{}function x(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let s=t.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s})))}(t)}catch(s){return atob(t)}}m.prototype.name="InvalidTokenError";var f=s(88898),_=(s(77632),s(80184));const w=()=>{const{user:e,setUser:t}=(0,a.useContext)(f.S),s=(0,u.s0)(),[w,j]=(0,a.useState)(""),[N,b]=(0,a.useState)(""),[v,I]=(0,a.useState)(""),[y,Z]=(0,a.useState)("");(0,a.useEffect)((()=>{console.log(e.userId)}),[e]);return(0,_.jsx)(r.Z,{className:"d-flex justify-content-center mt-5",children:(0,_.jsx)(c.Z,{className:"w-100",children:(0,_.jsx)(n.Z,{md:5,className:"mx-auto",children:(0,_.jsx)(o.Z,{className:"p-5",id:"card_border_color_change",children:(0,_.jsxs)(l.Z,{className:"row g-3 needs-validation",noValidate:!0,children:[(0,_.jsx)("h1",{className:"text-center defaultcolor",children:"Log In"}),(0,_.jsx)(i.Z,{className:"mb-2",children:(0,_.jsx)(l.Z.Control,{className:"input_fields",onChange:e=>j(e.target.value),style:{borderRadius:"8px"},type:"email",placeholder:"Email address"})}),(0,_.jsx)(i.Z,{className:"mb-4",children:(0,_.jsx)(l.Z.Control,{className:"input_fields",onChange:e=>b(e.target.value),style:{borderRadius:"8px"},type:"password",placeholder:"Password"})}),(0,_.jsx)(c.Z,{children:(0,_.jsxs)(n.Z,{xs:12,className:"text-center",children:[(0,_.jsx)(d.Z,{onClick:()=>{(0,p.X)().LOGIN({email:w,password:N}).then((e=>{console.log(e);const a=e.data.token;console.log(e);const r=function(e,t){if("string"!==typeof e)throw new m("Invalid token specified: must be a string");t||(t={});const s=!0===t.header?0:1,a=e.split(".")[s];if("string"!==typeof a)throw new m("Invalid token specified: missing part #".concat(s+1));let r;try{r=x(a)}catch(c){throw new m("Invalid token specified: invalid base64 for part #".concat(s+1," (").concat(c.message,")"))}try{return JSON.parse(r)}catch(c){throw new m("Invalid token specified: invalid json for part #".concat(s+1," (").concat(c.message,")"))}}(a);console.log(r),t((e=>({...e,userId:r.userId,email:r.email,role:r.role}))),I("Logged in successfully!"),g.g.login(a),"firm_user"===r.role?s("/firm_user_dash"):s("/super_admin_dash")})).catch((e=>{console.error("Invalid credentials:",e),Z("Invalid credentials. Register yourself.")}))},className:"px-4",id:"but_color",type:"button",children:"Log in"}),y&&(0,_.jsx)("div",{className:"text-danger",children:y}),v&&(0,_.jsx)("div",{className:"text-success",children:v})]})}),(0,_.jsx)(c.Z,{className:"mt-3",children:(0,_.jsx)(n.Z,{className:"text-center",children:(0,_.jsx)(h.rU,{to:"/signup",children:(0,_.jsx)(d.Z,{className:"px-4",id:"but_color",children:"New User ? Signup"})})})}),(0,_.jsx)("br",{})]})})})})})}}}]);
//# sourceMappingURL=765.ada9366a.chunk.js.map