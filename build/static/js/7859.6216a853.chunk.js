"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7859],{49214:(e,t,s)=>{s.d(t,{X:()=>n});s(72791);var r=s(12903),a=s(25407);const n=()=>({REGISTER:async e=>{try{return(await r.Z.post("".concat(a.Y,"/api/users/register"),e)).data}catch(t){throw console.log("Error registering:",t),t}},LOGIN:async e=>{try{return(await r.Z.post("".concat(a.Y,"/api/users/login"),e)).data}catch(t){throw console.log("Invalid credentials:",t),t}}})},25407:(e,t,s)=>{s.d(t,{Y:()=>r});const r="http://20.235.178.6:3007"},44331:(e,t,s)=>{s.d(t,{g:()=>r});s(12903).Z.create({baseURL:"http://192.168.1.69:3002"});class r{static isAuthenticated(){return null!==localStorage.getItem("token")}static login(e){localStorage.setItem("token",e)}static logout(){localStorage.removeItem("token")}static getUserData(){return localStorage.getItem("user")}}},67859:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var r=s(72791),a=s(47022),n=s(89743),o=s(2677),c=s(28282),l=s(33821),i=s(27098),d=s(16157),u=s(57689),g=s(11087),p=s(44331),h=s(49214);class m extends Error{}function x(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let s=t.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s})))}(t)}catch(s){return atob(t)}}m.prototype.name="InvalidTokenError";var _=s(88898),f=(s(77632),s(13071)),w=s(80184);const b=()=>{const{user:e,setUser:t}=(0,r.useContext)(_.S),s=(0,u.s0)(),[b,j]=(0,r.useState)(""),[N,v]=(0,r.useState)(""),[y,I]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),[Z,C]=(0,r.useState)(!1);(0,r.useEffect)((()=>{console.log(e.userId)}),[e]);return(0,w.jsx)("div",{className:"login_background",children:(0,w.jsx)(a.Z,{className:"d-flex justify-content-center mt-5",children:(0,w.jsx)(n.Z,{className:"w-100",children:(0,w.jsx)(o.Z,{md:6,className:"mx-auto",children:(0,w.jsx)(c.Z,{className:"p-5",id:"card_border_color_change",style:{boxShadow:"4px 4px 60px rgb(61, 61, 61)"},children:(0,w.jsxs)(l.Z,{className:"needs-validation",noValidate:!0,children:[(0,w.jsx)("h1",{className:"text-center defaultcolor",children:"Log In"}),(0,w.jsx)(i.Z,{className:"mb-2",children:(0,w.jsx)(l.Z.Control,{className:"input_fields",onChange:e=>j(e.target.value),style:{borderRadius:"8px"},type:"email",placeholder:"Email address"})}),(0,w.jsxs)(i.Z,{className:"mb-4",children:[(0,w.jsx)(l.Z.Control,{className:"input_fields",onChange:e=>v(e.target.value),style:{borderRadius:"8px"},type:Z?"text":"password",placeholder:"Password"}),(0,w.jsxs)(i.Z.Text,{onClick:()=>C(!Z),style:{cursor:"pointer"},children:[Z?(0,w.jsx)(f.dSq,{}):(0,w.jsx)(f.tgn,{})," "]})]}),(0,w.jsx)(n.Z,{className:"login_log_bt_row justify-content-center align-content-center",children:(0,w.jsxs)(o.Z,{xs:12,className:"login_log_bt_col text-center",children:[(0,w.jsx)(d.Z,{onClick:()=>{(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).toLowerCase()))(b)?(0,h.X)().LOGIN({email:b,password:N}).then((e=>{console.log(e);const r=e.data.token;console.log(e);const a=function(e,t){if("string"!==typeof e)throw new m("Invalid token specified: must be a string");t||(t={});const s=!0===t.header?0:1,r=e.split(".")[s];if("string"!==typeof r)throw new m("Invalid token specified: missing part #".concat(s+1));let a;try{a=x(r)}catch(n){throw new m("Invalid token specified: invalid base64 for part #".concat(s+1," (").concat(n.message,")"))}try{return JSON.parse(a)}catch(n){throw new m("Invalid token specified: invalid json for part #".concat(s+1," (").concat(n.message,")"))}}(r);console.log(a),t((e=>({...e,userId:a.userId,email:a.email,role:a.role}))),e.status&&"Login successful"===e.message?(I("Logged in successfully!"),p.g.login(r),"firm_user"===a.role?s("/firm_user_dash"):s("/super_admin_dash"),setTimeout((()=>{window.location.reload()}),1e3)):(S("Unexpected response from server"),I(""))})).catch((e=>{if(console.error("Some error, solve it: ",e),e.response&&e.response.data){const t=e.response.data.message;S("Email and password are required"===t?"All fields are required":"Invalid credentials")}else S("Something went wrong !!");I("")})):S("Invalid email")},className:"login_log_bt",id:"but_color",type:"button",children:"Log in"}),k&&(0,w.jsx)("div",{className:"text-danger",children:k}),y&&(0,w.jsx)("div",{className:"text-success",children:y})]})}),(0,w.jsx)(n.Z,{className:"login_signup_bt_row justify-content-center align-content-center mt-3",children:(0,w.jsx)(o.Z,{className:"login_signup_bt_col text-center",children:(0,w.jsx)(g.rU,{to:"/signup",children:(0,w.jsx)(d.Z,{className:"login_signup_bt",id:"but_color",children:"New User ? Signup"})})})}),(0,w.jsx)("br",{})]})})})})})})}}}]);
//# sourceMappingURL=7859.6216a853.chunk.js.map