"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6456],{17598:(e,s,r)=>{r.d(s,{T:()=>t});const t="http://13.126.48.224:3007"},16897:(e,s,r)=>{r.r(s),r.d(s,{default:()=>b});var t=r(65043),a=r(53519),n=r(61072),c=r(78602),l=r(88258),o=r(68155),i=r(67006),d=r(1433),m=r(42780),A=r(86311),h=r(70702),u=r(35475),x=r(73457),j=r(79067),f=r(85049),g=r(59395),_=r(17598),p=(r(13254),r(70579));const b=()=>{const{user:e}=(0,t.useContext)(g.R),s=e.userId;(0,t.useEffect)((()=>{console.log(s)}),[s]);const[r,b]=(0,t.useState)([]),[y,w]=(0,t.useState)(""),[C,N]=(0,t.useState)(""),[T,v]=(0,t.useState)([]),[S,E]=(0,t.useState)([]),[F,k]=(0,t.useState)(""),[I,U]=(0,t.useState)(""),[L,B]=(0,t.useState)(""),[P,M]=(0,t.useState)(!1),[Q,K]=(0,t.useState)(!1),[X,J]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(_.T,"/api/users/get_all_firms_by_user/").concat(s));if(!e.ok)throw new Error("Failed to show firms");const r=await e.json();b(r.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[s]);const O=async e=>{try{const s=await fetch("".concat(_.T,"/api/users/get_general_ledgers/").concat(e));if(!s.ok)throw new Error("Failed to show GL list");return(await s.json()).data}catch(s){console.error("Error fetching GL list:",s)}};(0,t.useEffect)((()=>{(async()=>{if(y){M(!0);const e=await O(y);v(e),M(!1)}})()}),[y]),(0,t.useEffect)((()=>{(async()=>{if(C){K(!0);const e=await O(C);E(e),K(!1)}})()}),[C]);return(0,p.jsxs)("div",{children:[(0,p.jsx)(x.A,{}),(0,p.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,p.jsx)(j.A,{}),(0,p.jsx)(a.A,{fluid:!0,className:"flex-grow-1 px-3 px-md-5",children:(0,p.jsx)(n.A,{className:"justify-content-center mb-3",children:(0,p.jsx)(c.A,{md:12,children:(0,p.jsxs)(l.A,{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,p.jsxs)(n.A,{className:"allfirms_title_mainrow",children:[(0,p.jsx)(c.A,{md:8,style:{marginLeft:"10px"},children:(0,p.jsxs)(n.A,{className:"allfirms_title_row py-1 align-items-center",children:[(0,p.jsx)(c.A,{md:1,children:(0,p.jsx)("img",{className:"",src:f,width:25,height:25,alt:"AllFirms Logo"})}),(0,p.jsx)(c.A,{md:5,children:(0,p.jsx)("h4",{children:"Make a Transaction"})})]})}),(0,p.jsx)(c.A,{md:3,className:"d-flex align-items-center justify-content-end",children:(0,p.jsx)(u.N_,{to:"/firm_transactions",children:(0,p.jsx)(o.A,{id:"but_color",children:"All Transactions"})})})]}),(0,p.jsx)(n.A,{className:"allfirms_table_row py-5 justify-content-center",children:(0,p.jsx)(c.A,{md:8,className:"mb-3 mb-md-0",children:(0,p.jsx)(n.A,{className:"justify-content-center",children:(0,p.jsxs)(c.A,{md:12,children:[(0,p.jsx)(l.A,{className:"bg_color_blue_white",children:(0,p.jsx)(l.A.Body,{children:(0,p.jsxs)(i.A,{children:[(0,p.jsx)(d.A,{className:"mb-3",controlId:"formTransactionID",children:(0,p.jsx)(m.A,{children:"Transaction :"})}),(0,p.jsxs)(d.A,{as:n.A,className:"mb-3",controlId:"formFrom",children:[(0,p.jsx)(m.A,{column:!0,sm:3,children:"From:"}),(0,p.jsx)(c.A,{sm:5,children:(0,p.jsxs)(i.A.Control,{as:"select",value:y,className:"form-select",onChange:e=>w(e.target.value),children:[(0,p.jsx)("option",{value:"",children:"Select Firm"}),r.map((e=>(0,p.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,p.jsxs)(c.A,{sm:4,children:[(0,p.jsxs)(i.A.Control,{as:"select",value:F,className:"form-select",onChange:e=>k(e.target.value),disabled:P,children:[(0,p.jsx)("option",{value:"",children:"Select Your Firm Account"}),T.map((e=>(0,p.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]}),P&&(0,p.jsx)("p",{children:"Loading..."})]})]}),(0,p.jsxs)(d.A,{as:n.A,className:"mb-3",controlId:"formTo",children:[(0,p.jsx)(m.A,{column:!0,sm:3,children:"To:"}),(0,p.jsx)(c.A,{sm:5,children:(0,p.jsxs)(i.A.Control,{as:"select",value:C,className:"form-select",onChange:e=>N(e.target.value),children:[(0,p.jsx)("option",{value:"",children:"Select Firm"}),r.map((e=>(0,p.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,p.jsxs)(c.A,{sm:4,children:[(0,p.jsxs)(i.A.Control,{as:"select",value:I,className:"form-select",onChange:e=>U(e.target.value),disabled:Q,children:[(0,p.jsx)("option",{value:"",children:"Select Your Firm Account"}),S.map((e=>(0,p.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]}),Q&&(0,p.jsx)("p",{children:"Loading..."})]})]}),(0,p.jsxs)(d.A,{as:n.A,className:"mb-3",controlId:"formAmount",children:[(0,p.jsx)(m.A,{column:!0,sm:3,children:"Amount :"}),(0,p.jsx)(c.A,{sm:5,children:(0,p.jsx)(A.A,{type:"text",placeholder:"Amount",value:L,onChange:e=>B(e.target.value)})})]})]})})}),(0,p.jsx)(n.A,{className:"justify-content-center mt-3",children:(0,p.jsx)(o.A,{className:"col-md-4 col-6",id:"but_color",onClick:async()=>{J(!0)},children:"Process Transaction"})})]})})})})]})})})})]}),(0,p.jsxs)(h.A,{show:X,onHide:()=>J(!1),centered:!0,children:[(0,p.jsx)(h.A.Header,{closeButton:!0,children:(0,p.jsx)(h.A.Title,{children:"Confirm Transaction"})}),(0,p.jsx)(h.A.Body,{children:"Are you sure you want to proceed with this Transaction?"}),(0,p.jsxs)(h.A.Footer,{children:[(0,p.jsx)(o.A,{variant:"secondary",onClick:()=>J(!1),children:"Cancel"}),(0,p.jsx)(o.A,{variant:"primary",onClick:async()=>{try{const e={from_gl_id:F,to_gl_id:I,amount:Number(L),from_firm_id:y,to_firm_id:C},r=await fetch("".concat(_.T,"/api/users/payment/").concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw new Error("Failed to process this transaction");const t=await r.json();console.log(t),alert("Transaction successful"),J(!1)}catch(e){console.error("Problem for processing transaction:",e),alert("Transaction Failed.")}},children:"Confirm Transaction"})]})]})]})}},85049:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=6456.0d76ad62.chunk.js.map