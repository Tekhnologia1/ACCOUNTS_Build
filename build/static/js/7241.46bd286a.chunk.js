"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7241],{29534:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(72791),r=t(35109),l=t(13162),o=t(89743),c=t(2677),n=t(16157),i=t(33821),d=t(323),m=t(74292),h=t(11087),u=t(88898),x=(t(67135),t(80184));const j=()=>{const{user:e}=(0,a.useContext)(u.S),s=e.userId,[t,j]=(0,a.useState)(""),[A,f]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[Z,y]=(0,a.useState)(""),[_,b]=(0,a.useState)(""),[w,N]=(0,a.useState)(""),[v,C]=(0,a.useState)([]),[S,E]=(0,a.useState)(""),[F,U]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{try{const e=await fetch("http://13.233.194.13:3007/api/users/get_all_firms_by_user/".concat(s));if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();console.log(t.data),C(t.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[s]);const T=async e=>{try{if(!(await fetch("http://13.233.194.13:3007/api/users/assign_firm_to_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,firm_id:w,added_by_user_id:s})})).ok)throw new Error("Failed to assign firm to user");E("User is added with assigned firm !!")}catch(t){console.error("Error assigning firm to user:",t),U("Failed to assign firm. Please try again."),E("")}};return(0,x.jsxs)("div",{children:[(0,x.jsx)(r.gV,{}),(0,x.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,x.jsx)(r.Pm,{}),(0,x.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(o.Z,{className:"justify-content-center mb-3",children:(0,x.jsx)(c.Z,{xs:12,children:(0,x.jsxs)("div",{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,x.jsxs)(o.Z,{className:"allfirms_title_mainrow",children:[(0,x.jsx)(c.Z,{xs:9,style:{marginLeft:"10px"},children:(0,x.jsxs)(o.Z,{className:"allfirms_title_row py-1 align-items-center",children:[(0,x.jsx)(c.Z,{xs:1,children:(0,x.jsx)("img",{src:l,width:25,height:25,alt:"All Firms Logo"})}),(0,x.jsx)(c.Z,{xs:4,children:(0,x.jsx)("h4",{children:"Add Users"})})]})}),(0,x.jsx)(c.Z,{xs:2,className:"align-content-center justify-content-end",children:(0,x.jsx)(h.rU,{to:"/all_users",children:(0,x.jsx)(n.Z,{id:"but_color",children:"All Users"})})})]}),(0,x.jsx)(o.Z,{className:"allfirms_table_row py-5 justify-content-center",children:(0,x.jsx)(c.Z,{xs:12,md:6,children:(0,x.jsxs)(i.Z,{children:[(0,x.jsx)(d.Z,{className:"mb-3",controlId:"formName",children:(0,x.jsx)(m.Z,{type:"text",placeholder:"Name",value:t,onChange:e=>j(e.target.value)})}),(0,x.jsx)(d.Z,{className:"mb-3",controlId:"formEmail",children:(0,x.jsx)(m.Z,{type:"email",placeholder:"Email",value:A,onChange:e=>f(e.target.value)})}),(0,x.jsx)(d.Z,{className:"mb-3",controlId:"formPassword",children:(0,x.jsx)(m.Z,{type:"password",placeholder:"Password",value:g,onChange:e=>p(e.target.value)})}),(0,x.jsx)(d.Z,{className:"mb-3",controlId:"formContact",children:(0,x.jsx)(m.Z,{type:"text",placeholder:"Contact",value:Z,onChange:e=>y(e.target.value)})}),(0,x.jsx)(d.Z,{className:"mb-3",controlId:"formAddress",children:(0,x.jsx)(m.Z,{type:"text",placeholder:"Address",value:_,onChange:e=>b(e.target.value)})}),(0,x.jsx)(d.Z,{className:"mb-3",controlId:"formStatus",children:(0,x.jsx)(m.Z,{type:"text",placeholder:"Status",disabled:!0,value:"Active"})}),(0,x.jsxs)(i.Z.Group,{as:o.Z,className:"mb-3",controlId:"formFirmName",children:[(0,x.jsx)(i.Z.Label,{column:!0,sm:3,children:"Firm Name"}),(0,x.jsx)(c.Z,{sm:9,children:(0,x.jsxs)(i.Z.Control,{as:"select",value:w,className:"form-select",onChange:e=>N(e.target.value),children:[(0,x.jsx)("option",{value:"",children:"Select Firm"}),v.map((e=>(0,x.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})})]}),(0,x.jsxs)(o.Z,{className:"justify-content-center align-content-center",children:[(0,x.jsx)(n.Z,{onClick:async()=>{try{const e=await fetch("http://13.233.194.13:3007/api/users/add_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:A,password:g,contact:Z,address:_,status:"1",role:"2"})});if(!e.ok)throw new Error("Failed to add user");{const s=await e.json();await T(s.data),E("User added successfully!"),U(""),setTimeout((()=>{window.location.reload()}),1e3)}}catch(e){console.error("Error adding user:",e),U("Failed to add user. Please try again."),E(""),setTimeout((()=>{window.location.reload()}),1e3)}},className:"col-md-3",id:"but_color",children:"Save"}),F&&(0,x.jsx)("div",{className:"text-danger mt-2 text-center",children:F}),S&&(0,x.jsx)("div",{className:"text-success mt-2 text-center",children:S})]})]})})})]})})})})})]})]})}},13162:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=7241.46bd286a.chunk.js.map