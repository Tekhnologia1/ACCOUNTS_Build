"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5962],{25407:(e,s,t)=>{t.d(s,{Y:()=>r});const r="http://20.235.178.6:3007"},92041:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var r=t(72791),a=(t(13162),t(78983)),c=t(59565),l=(t(77632),t(11087)),n=t(33821),o=t(89743),i=t(2677),d=t(34782),h=t(88898),m=t(12903),u=t(25407),x=t(68446),j=t(80184);const f=()=>{const{user:e}=(0,r.useContext)(h.S),s=e.userId,[t,f]=(0,r.useState)([]),[g,_]=(0,r.useState)(""),[A,b]=(0,r.useState)([]),[N,y]=(0,r.useState)(!1),[p,w]=(0,r.useState)({gl_id:"",gl_name:"",gl_status:""}),[C,Z]=(0,r.useState)(!1),[E,F]=(0,r.useState)(null),[k,S]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(u.Y,"/api/users/get_all_firms_by_user/").concat(s));if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();f(t.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[s]),(0,r.useEffect)((()=>{(async()=>{if(g)try{const e=g,s=await fetch("".concat(u.Y,"/api/users/firm_total_bal/").concat(e));if(!s.ok)throw new Error("Failed to fetch total balance");const t=await s.json();S(t.data.totalBalance)}catch(e){console.error("Error fetching total balance:",e)}})()}),[g]);const v=async e=>{try{const s=await fetch("".concat(u.Y,"/api/users/get_general_ledgers/").concat(e));if(!s.ok)throw new Error("Failed to fetch data");const t=await s.json();b(t.data)}catch(s){console.error("Error fetching data:",s)}};(0,r.useEffect)((()=>{g&&v(g)}),[g]);return(0,j.jsxs)("div",{children:[(0,j.jsx)(c.LC,{}),(0,j.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,j.jsx)(c.WW,{}),(0,j.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,j.jsx)(a.rb,{className:"justify-content-center mb-3",children:(0,j.jsx)(a.b7,{md:12,children:(0,j.jsxs)(a.xH,{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,j.jsxs)(a.rb,{className:"align-items-center",children:[(0,j.jsx)(a.b7,{style:{marginLeft:"11px"},children:(0,j.jsxs)(a.rb,{className:"allfirms_icon_title_row align-items-center",children:[(0,j.jsx)(a.b7,{className:"col-2 col-md-1",children:(0,j.jsx)("img",{className:"sidebar_icon_color",src:x,width:25,height:25,alt:"All Firms Logo"})}),(0,j.jsx)(a.b7,{className:"col-7 col-md-7",children:(0,j.jsx)("h5",{className:"title_font mb-0",style:{color:"white"},children:"Firm Accounts"})})]})}),(0,j.jsx)(a.b7,{className:"col-4 facc_crea_but_col",children:(0,j.jsx)(l.rU,{to:"/user_create_ledger",children:(0,j.jsx)(a.u5,{id:"but_color",className:"m-0",children:"Create"})})})]}),(0,j.jsx)(a.rb,{className:"allfirms_table_row py-5 justify-content-center",children:(0,j.jsxs)(a.b7,{children:[(0,j.jsxs)(a.rb,{className:"justify-content-center mb-3",children:[(0,j.jsx)(a.b7,{className:"justify-content-start justify-content-md-start facc_sel_firm_col",children:(0,j.jsx)(n.Z.Group,{as:o.Z,className:"mb-3",controlId:"formFirmName",children:(0,j.jsx)(i.Z,{md:11,className:"justify-content-start justify-content-md-start",children:(0,j.jsxs)(n.Z.Control,{as:"select",value:g,className:"form-select",onChange:e=>_(e.target.value),children:[(0,j.jsx)("option",{value:"",children:"Select Firm"}),t.map((e=>(0,j.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})})})}),(0,j.jsx)(a.b7,{className:"d-flex align-items-center justify-content-center justify-content-md-end mt-0 mt-md-0 facc_f_bal",children:null!==k&&(0,j.jsxs)("div",{style:{backgroundColor:"green",color:"white",padding:"10px",borderRadius:"5px"},children:["Firm Total Balance: ",k]})})]}),(0,j.jsx)(a.rb,{className:"justify-content-center",children:(0,j.jsx)(i.Z,{md:12,children:(0,j.jsxs)(a.Sx,{hover:!0,responsive:!0,className:"custom-table",children:[(0,j.jsx)(a.V,{className:"custom-table-header",children:(0,j.jsxs)(a.T6,{children:[(0,j.jsx)(a.is,{children:"Sr. No."}),(0,j.jsx)(a.is,{children:"Firm Account Name"}),(0,j.jsx)(a.is,{children:"Status"}),(0,j.jsx)(a.is,{children:"Curr. Balance"}),(0,j.jsx)(a.is,{children:"Action"})]})}),(0,j.jsx)(a.NR,{children:A.map(((e,s)=>(0,j.jsxs)(a.T6,{children:[(0,j.jsx)(a.NN,{children:s+1}),(0,j.jsx)(a.NN,{children:e.gl_name}),(0,j.jsx)(a.NN,{children:e.gl_status}),(0,j.jsx)(a.NN,{children:e.balance}),(0,j.jsxs)(a.NN,{children:[(0,j.jsx)(a.u5,{color:"warning",size:"sm",className:"me-2",onClick:()=>(e=>{w(e),y(!0)})(e),children:"Edit"}),(0,j.jsx)(a.u5,{color:"danger",size:"sm",onClick:()=>(e=>{F(e),Z(!0)})({firm_id:g,gl_id:e.gl_id}),children:"Delete"})]})]},s)))})]})})})]})})]})})})})]}),(0,j.jsxs)(d.Z,{show:N,onHide:()=>y(!1),children:[(0,j.jsx)(d.Z.Header,{closeButton:!0,children:(0,j.jsx)(d.Z.Title,{children:"Edit General Ledger"})}),(0,j.jsx)(d.Z.Body,{children:(0,j.jsx)(n.Z,{children:(0,j.jsxs)(n.Z.Group,{controlId:"formGLName",children:[(0,j.jsx)(n.Z.Label,{children:"Gen Ledger Name"}),(0,j.jsx)(n.Z.Control,{type:"text",value:p.gl_name,onChange:e=>w({...p,gl_name:e.target.value})})]})})}),(0,j.jsxs)(d.Z.Footer,{children:[(0,j.jsx)(a.u5,{color:"secondary",onClick:()=>y(!1),children:"Close"}),(0,j.jsx)(a.u5,{color:"primary",onClick:()=>{(async(e,s,t)=>{try{const r=await m.Z.put("".concat(u.Y,"/api/users/update_general_ledgers/").concat(e,"/").concat(s),t);if(200!==r.status)throw new Error("Failed to update data");alert(r.data.message),y(!1),v(e)}catch(r){console.error("Error updating data:",r)}})(g,p.gl_id,{gl_name:p.gl_name,gl_status:p.gl_status})},children:"Save changes"})]})]}),(0,j.jsxs)(d.Z,{show:C,onHide:()=>Z(!1),children:[(0,j.jsx)(d.Z.Header,{closeButton:!0,children:(0,j.jsx)(d.Z.Title,{children:"Confirm Deletion"})}),(0,j.jsx)(d.Z.Body,{children:"Are you sure you want to delete this ledger?"}),(0,j.jsxs)(d.Z.Footer,{children:[(0,j.jsx)(a.u5,{color:"secondary",onClick:()=>Z(!1),children:"Cancel"}),(0,j.jsx)(a.u5,{color:"danger",onClick:async()=>{if(!E)return;const{firm_id:e,gl_id:s}=E;try{if(200!==(await m.Z.delete("".concat(u.Y,"/api/users/delete_general_ledgers/").concat(e,"/").concat(s))).status)throw new Error("Failed to delete data");Z(!1),v(e)}catch(t){console.error("Error deleting data:",t)}},children:"Delete"})]})]})]})}},13162:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=5962.45457244.chunk.js.map