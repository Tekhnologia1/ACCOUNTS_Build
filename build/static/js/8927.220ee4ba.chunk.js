"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8927],{25407:(e,a,s)=>{s.d(a,{Y:()=>t});const t="http://20.235.178.6:3007"},2383:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var t=s(72791),r=s(47022),n=s(89743),c=s(2677),l=s(28282),o=s(16157),i=s(33821),d=s(323),m=s(53392),u=s(74292),h=s(34782),f=s(11087),x=(s(13162),s(88898)),j=s(25407),_=s(59565),g=s(12165),b=s(80184);const p=()=>{const{user:e}=(0,t.useContext)(x.S),a=e.userId;(0,t.useEffect)((()=>{console.log(a)}),[a]);const[s,p]=(0,t.useState)([]),[Z,y]=(0,t.useState)([]),[A,N]=(0,t.useState)(""),[v,w]=(0,t.useState)(""),[C,k]=(0,t.useState)([]),[S,E]=(0,t.useState)([]),[T,F]=(0,t.useState)(""),[I,P]=(0,t.useState)(""),[Y,U]=(0,t.useState)(""),[B,L]=(0,t.useState)(""),[O,R]=(0,t.useState)(!1),[K,M]=(0,t.useState)(!1),[Q,X]=(0,t.useState)(!1),[z,D]=(0,t.useState)(""),[J,V]=(0,t.useState)(""),[W,H]=(0,t.useState)(""),[q,G]=(0,t.useState)({});(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(j.Y,"/api/users/get_all_firms_by_user/").concat(a));if(!e.ok)throw new Error("Failed to show firms");const s=await e.json();p(s.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[a]),(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(j.Y,"/api/users/get_all_firms_by_adding_user/").concat(a));if(!e.ok)throw new Error("Failed to show firms");const s=await e.json();y(s.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[a]);const $=async e=>{try{const a=await fetch("".concat(j.Y,"/api/users/get_general_ledgers/").concat(e));if(!a.ok)throw new Error("Failed to show GL list");return(await a.json()).data}catch(a){console.error("Error fetching GL list:",a)}};(0,t.useEffect)((()=>{(async()=>{if(A){R(!0);const e=await $(A);k(e),R(!1)}})()}),[A]),(0,t.useEffect)((()=>{(async()=>{if(v){M(!0);const e=await $(v);E(e),M(!1)}})()}),[v]);return(0,b.jsxs)("div",{children:[(0,b.jsx)(_.LC,{}),(0,b.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,b.jsx)(_.WW,{}),(0,b.jsx)(r.Z,{fluid:!0,className:"flex-grow-1 px-3 px-md-5",children:(0,b.jsx)(n.Z,{className:"justify-content-center mb-3",children:(0,b.jsx)(c.Z,{md:12,children:(0,b.jsxs)(l.Z,{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,b.jsxs)(n.Z,{className:"allfirms_title_mainrow",children:[(0,b.jsx)(c.Z,{md:8,style:{marginLeft:"10px"},children:(0,b.jsxs)(n.Z,{className:"allfirms_title_row py-1 align-items-center",children:[(0,b.jsx)(c.Z,{md:1,children:(0,b.jsx)("img",{className:"",src:g,width:25,height:25,alt:"AllFirms Logo"})}),(0,b.jsx)(c.Z,{md:5,children:(0,b.jsx)("h5",{className:"mb-0",style:{color:"white"},children:"Make Transaction"})})]})}),(0,b.jsx)(c.Z,{md:3,className:"d-flex align-items-center justify-content-end",children:(0,b.jsx)(f.rU,{to:"/user_firm_transactions",children:(0,b.jsx)(o.Z,{id:"but_color",children:"All Transactions"})})})]}),(0,b.jsx)(n.Z,{className:"allfirms_table_row py-5 justify-content-center",children:(0,b.jsx)(c.Z,{className:"make_pay_block_col mb-3 mb-md-0",children:(0,b.jsx)(n.Z,{className:"justify-content-center",children:(0,b.jsxs)(c.Z,{md:12,children:[(0,b.jsx)(l.Z,{className:"bg_color_blue_white",children:(0,b.jsx)(l.Z.Body,{children:(0,b.jsxs)(i.Z,{children:[(0,b.jsx)(d.Z,{className:"mb-3",controlId:"formTransactionID",children:(0,b.jsx)(m.Z,{children:"Transaction :"})}),(0,b.jsxs)(d.Z,{as:n.Z,className:"mb-3",controlId:"formFrom",children:[(0,b.jsx)(m.Z,{column:!0,className:"make_pay_lable",md:3,children:"From:"}),(0,b.jsx)(c.Z,{className:"make_pay_select_firm",children:(0,b.jsxs)(i.Z.Control,{as:"select",value:A,className:"form-select",onChange:e=>N(e.target.value),children:[(0,b.jsx)("option",{value:"",children:"Select Firm"}),s.map((e=>(0,b.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,b.jsxs)(c.Z,{className:"make_pay_select_acc",children:[(0,b.jsxs)(i.Z.Control,{as:"select",value:T,className:"form-select",onChange:e=>F(e.target.value),disabled:!A||O,children:[(0,b.jsx)("option",{value:"",children:"Select Your Firm Account"}),C.map((e=>(0,b.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]}),O&&(0,b.jsx)("p",{children:"Loading..."})]})]}),(0,b.jsxs)(d.Z,{as:n.Z,className:"mb-3",controlId:"formTo",children:[(0,b.jsx)(m.Z,{column:!0,className:"make_pay_lable",md:3,children:"To:"}),(0,b.jsx)(c.Z,{className:"make_pay_select_firm",children:(0,b.jsxs)(i.Z.Control,{as:"select",value:v,className:"form-select",onChange:e=>w(e.target.value),children:[(0,b.jsx)("option",{value:"",children:"Select Firm"}),Z.map((e=>(0,b.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,b.jsxs)(c.Z,{className:"make_pay_select_acc",children:[(0,b.jsxs)(i.Z.Control,{as:"select",value:I,className:"form-select",onChange:e=>P(e.target.value),disabled:!v||K,children:[(0,b.jsx)("option",{value:"",children:"Select Your Firm Account"}),S.map((e=>(0,b.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]}),K&&(0,b.jsx)("p",{children:"Loading..."})]})]}),(0,b.jsxs)(d.Z,{as:n.Z,className:"mb-3",controlId:"formAmount",children:[(0,b.jsx)(m.Z,{column:!0,sm:3,children:"Amount :"}),(0,b.jsxs)(c.Z,{sm:4,children:[(0,b.jsx)(u.Z,{type:"text",placeholder:"Enter Amount",value:Y,onChange:e=>U(e.target.value),isInvalid:!!q.amount}),(0,b.jsx)(i.Z.Control.Feedback,{type:"invalid",children:q.amount})]})]}),(0,b.jsxs)(d.Z,{as:n.Z,className:"mb-3",controlId:"formRemark",children:[(0,b.jsx)(m.Z,{column:!0,sm:3,children:"Remark :"}),(0,b.jsx)(c.Z,{sm:9,children:(0,b.jsx)(u.Z,{type:"text",placeholder:"Enter Remark",value:B,onChange:e=>L(e.target.value)})})]})]})})}),(0,b.jsx)(n.Z,{className:"justify-content-center mt-3",children:(0,b.jsx)(o.Z,{className:"col-md-4 col-6",id:"but_color",onClick:()=>{const e=(e=>{const a={};return e?(isNaN(e)||e<=0)&&(a.amount="Amount must be a positive number"):a.amount="Amount is required",a})(Y);Object.keys(e).length>0?G(e):(D("Confirm Transaction"),V("Are you sure you want to proceed with this Transaction?"),H("Confirm Transaction"),X(!0))},children:"Process Transaction"})})]})})})})]})})})})]}),(0,b.jsxs)(h.Z,{show:Q,onHide:()=>X(!1),centered:!0,children:[(0,b.jsx)(h.Z.Header,{closeButton:!0,children:(0,b.jsx)(h.Z.Title,{children:z})}),(0,b.jsx)(h.Z.Body,{children:J}),(0,b.jsxs)(h.Z.Footer,{children:[(0,b.jsx)(o.Z,{variant:"secondary",onClick:()=>X(!1),children:"Confirm Transaction"===W?"Cancel":"Close"}),"Confirm Transaction"===W&&(0,b.jsx)(o.Z,{variant:"primary",onClick:async()=>{try{const e={from_gl_id:T,to_gl_id:I,amount:Number(Y),from_firm_id:A,to_firm_id:v,remark:B},s=await fetch("".concat(j.Y,"/api/users/payment/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Failed to process this transaction");const t=await s.json();console.log(t),D("Payment Successful"),V("Your transaction was successful."),H("Close"),X(!0)}catch(e){console.error("Problem for processing transaction:",e),D("Payment Failed"),V("Your transaction failed. Please try again."),H("Close"),X(!0)}},children:W})]})]})]})}},16157:(e,a,s)=>{s.d(a,{Z:()=>u});var t=s(81694),r=s.n(t),n=s(72791),c=s(80184);const l=["as","disabled"];function o(e){let{tagName:a,disabled:s,href:t,target:r,rel:n,role:c,onClick:l,tabIndex:o=0,type:i}=e;a||(a=null!=t||null!=r||null!=n?"a":"button");const d={tagName:a};if("button"===a)return[{type:i||"button",disabled:s},d];const m=e=>{(s||"a"===a&&function(e){return!e||"#"===e.trim()}(t))&&e.preventDefault(),s?e.stopPropagation():null==l||l(e)};return"a"===a&&(t||(t="#"),s&&(t=void 0)),[{role:null!=c?c:"button",disabled:void 0,tabIndex:s?void 0:o,href:t,target:"a"===a?r:void 0,"aria-disabled":s||void 0,rel:"a"===a?n:void 0,onClick:m,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),m(e))}},d]}const i=n.forwardRef(((e,a)=>{let{as:s,disabled:t}=e,r=function(e,a){if(null==e)return{};var s,t,r={},n=Object.keys(e);for(t=0;t<n.length;t++)s=n[t],a.indexOf(s)>=0||(r[s]=e[s]);return r}(e,l);const[n,{tagName:i}]=o(Object.assign({tagName:s,disabled:t},r));return(0,c.jsx)(i,Object.assign({},r,n,{ref:a}))}));i.displayName="Button";var d=s(10162);const m=n.forwardRef(((e,a)=>{let{as:s,bsPrefix:t,variant:n="primary",size:l,active:i=!1,disabled:m=!1,className:u,...h}=e;const f=(0,d.vE)(t,"btn"),[x,{tagName:j}]=o({tagName:s,disabled:m,...h}),_=j;return(0,c.jsx)(_,{...x,...h,ref:a,disabled:m,className:r()(u,f,i&&"active",n&&"".concat(f,"-").concat(n),l&&"".concat(f,"-").concat(l),h.href&&m&&"disabled")})}));m.displayName="Button";const u=m},13162:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=8927.220ee4ba.chunk.js.map