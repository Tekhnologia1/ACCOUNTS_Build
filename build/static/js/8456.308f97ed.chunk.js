"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8456],{25407:(e,a,t)=>{t.d(a,{Y:()=>s});const s="http://20.235.178.6:3007"},88456:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Z});var s=t(72791),l=t(47022),n=t(89743),r=t(2677),c=t(28282),o=t(16157),i=t(33821),d=t(323),m=t(53392),u=t(74292),h=t(34782),x=t(11087),j=t(59513),f=t.n(j),g=(t(68639),t(59565)),_=(t(13162),t(88898)),y=t(25407),p=t(47665),b=t(80184);const Z=()=>{const{user:e}=(0,s.useContext)(_.S),a=e.userId,[t,j]=(0,s.useState)([]),[Z,N]=(0,s.useState)(""),[A,v]=(0,s.useState)(""),[C,k]=(0,s.useState)([]),[w,S]=(0,s.useState)([]),[E,F]=(0,s.useState)(""),[P,T]=(0,s.useState)(""),[I,M]=(0,s.useState)(""),[U,B]=(0,s.useState)(""),[D,L]=(0,s.useState)(new Date),[O,R]=(0,s.useState)(!1),[Y,K]=(0,s.useState)(!1),[Q,V]=(0,s.useState)(!1),[X,z]=(0,s.useState)(""),[J,H]=(0,s.useState)(""),[W,q]=(0,s.useState)(""),[G,$]=(0,s.useState)(!1),[ee,ae]=(0,s.useState)(""),[te,se]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(y.Y,"/api/users/get_all_firms_by_user/").concat(a));if(!e.ok)throw new Error("Failed to fetch data");const t=await e.json();j(t.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[a]);const le=async e=>{try{const a=await fetch("".concat(y.Y,"/api/users/get_general_ledgers/").concat(e));if(!a.ok)throw new Error("Failed to fetch data");return(await a.json()).data}catch(a){console.error("Error fetching data:",a)}};(0,s.useEffect)((()=>{(async()=>{if(Z){R(!0);const e=await le(Z);k(e),R(!1)}})()}),[Z]),(0,s.useEffect)((()=>{(async()=>{if(A){K(!0);const e=await le(A);S(e),K(!1)}})()}),[A]);const ne=async()=>{if("Close"===ee)V(!1);else try{const e={from_gl_id:E,to_gl_id:P,amount:Number(I),from_firm_id:Z,to_firm_id:A,remark:U,trans_type:"payment",transaction_date:D.toLocaleDateString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},t=await fetch("".concat(y.Y,"/api/users/payment/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to process payment");const s=await t.json();console.log(s),console.log(D),console.log(D.toLocaleDateString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})),H("Payment Status"),q("Payment Successful !!"),$(!1),ae("Close"),re()}catch(e){console.error("Error processing payment:",e),H("Payment Status"),q("Payment Failed !!"),$(!1),ae("Close")}},re=()=>{setTimeout((()=>{window.location.reload()}),1e3)};return(0,b.jsxs)("div",{children:[(0,b.jsx)(g.gV,{}),(0,b.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,b.jsx)(g.Pm,{}),(0,b.jsx)(l.Z,{fluid:!0,className:"flex-grow-1 px-3 px-md-5",children:(0,b.jsx)(n.Z,{className:"justify-content-center mb-3",children:(0,b.jsx)(r.Z,{md:12,children:(0,b.jsxs)(c.Z,{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,b.jsxs)(n.Z,{className:"align-items-center",children:[(0,b.jsx)(r.Z,{style:{marginLeft:"11px"},children:(0,b.jsxs)(n.Z,{className:"allfirms_icon_title_row align-items-center",children:[(0,b.jsx)(r.Z,{className:"col-2 col-md-1",children:(0,b.jsx)("img",{className:"sidebar_icon_color",src:p,width:25,height:25,alt:"All Firms Logo"})}),(0,b.jsx)(r.Z,{className:"col-9 col-md-9",children:(0,b.jsx)("h5",{className:"title_font mb-0",style:{color:"white"},children:"Make Payment"})})]})}),(0,b.jsx)(r.Z,{className:"col-5 makepay_allpay_but_col",children:(0,b.jsx)(x.rU,{to:"/all_payments",children:(0,b.jsx)(o.Z,{id:"but_color",className:"m-0",children:"All Payments"})})})]}),(0,b.jsx)(n.Z,{className:"allfirms_table_row py-5 justify-content-center",children:(0,b.jsx)(r.Z,{className:"make_pay_block_col mb-3 mb-md-0",children:(0,b.jsx)(n.Z,{className:"justify-content-center",children:(0,b.jsx)(r.Z,{md:12,children:(0,b.jsx)(c.Z,{className:"bg_color_blue_white",children:(0,b.jsx)(c.Z.Body,{children:(0,b.jsxs)(i.Z,{children:[(0,b.jsx)(d.Z,{className:"mb-3",controlId:"formTransactionID",children:(0,b.jsx)(m.Z,{children:"Transaction :"})}),(0,b.jsxs)(d.Z,{as:n.Z,className:"mb-3",controlId:"formFrom",children:[(0,b.jsx)(m.Z,{column:!0,className:"make_pay_lable",md:3,children:"From:"}),(0,b.jsx)(r.Z,{className:"make_pay_select_firm",children:(0,b.jsxs)(i.Z.Control,{as:"select",value:Z,className:"form-select",onChange:e=>N(e.target.value),children:[(0,b.jsx)("option",{value:"",children:"Select Firm"}),t.map((e=>(0,b.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,b.jsxs)(r.Z,{className:"make_pay_select_acc",children:[(0,b.jsxs)(i.Z.Control,{as:"select",value:E,className:"form-select",onChange:e=>F(e.target.value),disabled:!Z||O,children:[(0,b.jsx)("option",{value:"",children:"Select Your Firm Account"}),C.map((e=>(0,b.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]}),O&&(0,b.jsx)("div",{className:"text-center mt-2",children:(0,b.jsx)("p",{children:"Loading accounts..."})})]})]}),(0,b.jsxs)(d.Z,{as:n.Z,className:"mb-3",controlId:"formTo",children:[(0,b.jsx)(m.Z,{column:!0,className:"make_pay_lable",md:3,children:"To:"}),(0,b.jsx)(r.Z,{className:"make_pay_select_firm",children:(0,b.jsxs)(i.Z.Control,{as:"select",value:A,className:"form-select",onChange:e=>v(e.target.value),children:[(0,b.jsx)("option",{value:"",children:"Select Firm"}),t.map((e=>(0,b.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,b.jsxs)(r.Z,{className:"make_pay_select_acc",children:[(0,b.jsxs)(i.Z.Control,{as:"select",value:P,className:"form-select",onChange:e=>T(e.target.value),disabled:!A||Y,children:[(0,b.jsx)("option",{value:"",children:"Select Your Firm Account"}),w.map((e=>(0,b.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]}),Y&&(0,b.jsx)("div",{className:"text-center mt-2",children:(0,b.jsx)("p",{children:"Loading accounts..."})})]})]}),(0,b.jsxs)(d.Z,{as:n.Z,className:"mb-3",controlId:"formAmount",children:[(0,b.jsx)(m.Z,{column:!0,className:"make_pay_lable",md:3,children:"Amount:"}),(0,b.jsx)(r.Z,{sm:4,children:(0,b.jsx)(u.Z,{type:"text",placeholder:"Enter Amount",value:I,onChange:e=>M(e.target.value)})})]}),(0,b.jsxs)(d.Z,{as:n.Z,className:"mb-3",controlId:"formDate",children:[(0,b.jsx)(m.Z,{column:!0,className:"make_pay_lable",md:3,children:"Date:"}),(0,b.jsx)(r.Z,{sm:4,children:(0,b.jsx)(f(),{selected:D,onChange:e=>L(e),showTimeSelect:!0,dateFormat:"MMMM d, yyyy h:mm aa",className:"form-control"})})]}),(0,b.jsxs)(d.Z,{as:n.Z,className:"mb-3",controlId:"formRemark",children:[(0,b.jsx)(m.Z,{column:!0,className:"make_pay_lable",md:3,children:"Remark:"}),(0,b.jsx)(r.Z,{md:9,children:(0,b.jsx)(u.Z,{type:"text",placeholder:"Enter Remark",value:U,onChange:e=>B(e.target.value)})})]}),(0,b.jsx)(d.Z,{as:n.Z,className:"mb-3 justify-content-center",children:(0,b.jsx)(r.Z,{md:4,children:(0,b.jsx)(o.Z,{id:"but_color",className:"m-0",onClick:()=>{!I||isNaN(I)||Number(I)<=0?z("Please enter a valid, positive amount."):(z(""),V(!0),H("Confirm Payment"),q("Are you sure you want to proceed with this payment?"),$(!0),ae("Confirm Payment"))},children:"Make Payment"})})}),X&&(0,b.jsx)("p",{className:"text-danger text-center",children:X})]})})})})})})})]})})})})]}),(0,b.jsxs)(h.Z,{show:Q,onHide:()=>V(!1),centered:!0,children:[(0,b.jsx)(h.Z.Header,{closeButton:!0,children:(0,b.jsx)(h.Z.Title,{children:J})}),(0,b.jsx)(h.Z.Body,{children:W}),G&&(0,b.jsxs)(h.Z.Footer,{children:[(0,b.jsx)(o.Z,{variant:"secondary",onClick:()=>V(!1),children:"Cancel"}),(0,b.jsx)(o.Z,{variant:"primary",onClick:ne,children:ee})]}),!G&&(0,b.jsx)(h.Z.Footer,{children:(0,b.jsx)(o.Z,{variant:"primary",onClick:ne,children:ee})})]})]})}},16157:(e,a,t)=>{t.d(a,{Z:()=>u});var s=t(81694),l=t.n(s),n=t(72791),r=t(80184);const c=["as","disabled"];function o(e){let{tagName:a,disabled:t,href:s,target:l,rel:n,role:r,onClick:c,tabIndex:o=0,type:i}=e;a||(a=null!=s||null!=l||null!=n?"a":"button");const d={tagName:a};if("button"===a)return[{type:i||"button",disabled:t},d];const m=e=>{(t||"a"===a&&function(e){return!e||"#"===e.trim()}(s))&&e.preventDefault(),t?e.stopPropagation():null==c||c(e)};return"a"===a&&(s||(s="#"),t&&(s=void 0)),[{role:null!=r?r:"button",disabled:void 0,tabIndex:t?void 0:o,href:s,target:"a"===a?l:void 0,"aria-disabled":t||void 0,rel:"a"===a?n:void 0,onClick:m,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),m(e))}},d]}const i=n.forwardRef(((e,a)=>{let{as:t,disabled:s}=e,l=function(e,a){if(null==e)return{};var t,s,l={},n=Object.keys(e);for(s=0;s<n.length;s++)t=n[s],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,c);const[n,{tagName:i}]=o(Object.assign({tagName:t,disabled:s},l));return(0,r.jsx)(i,Object.assign({},l,n,{ref:a}))}));i.displayName="Button";var d=t(10162);const m=n.forwardRef(((e,a)=>{let{as:t,bsPrefix:s,variant:n="primary",size:c,active:i=!1,disabled:m=!1,className:u,...h}=e;const x=(0,d.vE)(s,"btn"),[j,{tagName:f}]=o({tagName:t,disabled:m,...h}),g=f;return(0,r.jsx)(g,{...j,...h,ref:a,disabled:m,className:l()(u,x,i&&"active",n&&"".concat(x,"-").concat(n),c&&"".concat(x,"-").concat(c),h.href&&m&&"disabled")})}));m.displayName="Button";const u=m},13162:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=8456.308f97ed.chunk.js.map