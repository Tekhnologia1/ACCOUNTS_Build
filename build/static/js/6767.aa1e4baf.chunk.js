"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6767],{25407:(e,s,r)=>{r.d(s,{Y:()=>a});const a="http://20.235.178.6:3007"},70388:(e,s,r)=>{r.r(s),r.d(s,{default:()=>j});var a=r(72791),t=(r(13162),r(78983)),i=r(59565),l=(r(77632),r(11087)),c=r(88898),n=r(25407),o=r(12903),d=r(34782),m=r(33821),h=r(74457),x=(r(27934),r(80184));const j=()=>{const{user:e}=(0,a.useContext)(c.S),s=e.userId;(0,a.useEffect)((()=>{console.log(s)}),[s]);const[r,j]=(0,a.useState)([]),[f,u]=(0,a.useState)(!1),[_,g]=(0,a.useState)({firm_id:"",firm_name:"",firm_email:"",firm_gstno:"",firm_address:"",firm_status:""}),[A,N]=(0,a.useState)(null),[b,p]=(0,a.useState)(!1),[y,C]=(0,a.useState)(null),[Z,w]=(0,a.useState)(!1),[E,F]=(0,a.useState)({}),S=async()=>{try{const e=await fetch("".concat(n.Y,"/api/users/get_all_firms_by_user/").concat(s));if(!e.ok)throw new Error("Failed to fetch data");const r=await e.json();j(r.data)}catch(e){console.error("Error fetching data:",e)}};(0,a.useEffect)((()=>{S(),(async()=>{try{const e=await fetch("".concat(n.Y,"/api/users/total_bal_of_all_firms/").concat(s));if(!e.ok)throw new Error("Failed to fetch total balance");const r=await e.json();N(r.data)}catch(e){console.error("Error fetching total balance:",e)}})()}),[s]);const k=e=>{(async e=>{try{const s=await o.Z.get("".concat(n.Y,"/api/users/get_firm_details/").concat(e));if(200!==s.status)throw new Error("Failed to fetch firm details");const r=s.data;F(r.data),w(!0)}catch(s){console.error("Error fetching firm details:",s)}})(e)};return(0,x.jsxs)("div",{children:[(0,x.jsx)(i.gV,{}),(0,x.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,x.jsx)(i.Pm,{}),(0,x.jsx)("div",{className:"body flex-grow-1 px-2 px-md-2",children:(0,x.jsx)(t.rb,{className:"justify-content-center mb-3",children:(0,x.jsx)(t.b7,{className:"col-md-12",children:(0,x.jsxs)(t.xH,{className:"card_border_color_change py-4",style:{borderColor:"white"},children:[(0,x.jsxs)(t.rb,{className:"align-items-center",children:[(0,x.jsx)(t.b7,{style:{marginLeft:"11px"},children:(0,x.jsxs)(t.rb,{className:"allfirms_icon_title_row align-items-center",children:[(0,x.jsx)(t.b7,{className:"col-2 col-md-1",children:(0,x.jsx)("img",{className:"sidebar_icon_color",src:h,width:25,height:25,alt:"All Firms Logo"})}),(0,x.jsx)(t.b7,{className:"col-7 col-md-7",children:(0,x.jsx)("h5",{className:"title_font mb-0",style:{color:"white"},children:"All Firms"})})]})}),(0,x.jsx)(t.b7,{className:"col-5 facc_crea_but_col",children:(0,x.jsx)(l.rU,{to:"/create_firms",children:(0,x.jsx)(t.u5,{id:"but_color",className:"m-0",children:"Create Firm"})})})]}),(0,x.jsx)(t.rb,{className:"justify-content-center mt-4 allf_tot_bal",children:(0,x.jsx)(t.b7,{md:11,className:"d-flex align-items-center justify-content-end",children:null!==A&&(0,x.jsxs)("div",{className:"mx-sm-4",style:{backgroundColor:"green",color:"white",padding:"10px",borderRadius:"5px"},children:["Cash in Hand: ",A]})})}),(0,x.jsx)(t.rb,{className:"allfirms_table_row py-3 px-3",children:(0,x.jsxs)(t.Sx,{hover:!0,responsive:!0,className:"custom-table",children:[(0,x.jsx)(t.V,{className:"custom-table-header",children:(0,x.jsxs)(t.T6,{children:[(0,x.jsx)(t.is,{children:"Sr. No."}),(0,x.jsx)(t.is,{children:"Firm Name"}),(0,x.jsx)(t.is,{children:"Address"}),(0,x.jsx)(t.is,{children:"Status"}),(0,x.jsx)(t.is,{children:"GST No."}),(0,x.jsx)(t.is,{children:"Curr. Balance"}),(0,x.jsx)(t.is,{children:"Action"}),(0,x.jsx)(t.is,{children:"Details"})]})}),(0,x.jsx)(t.NR,{children:r.map(((e,s)=>(0,x.jsxs)(t.T6,{children:[(0,x.jsx)(t.NN,{children:s+1}),(0,x.jsx)(t.NN,{children:e.firm_name}),(0,x.jsx)(t.NN,{children:e.firm_address}),(0,x.jsx)(t.NN,{children:e.firm_status}),(0,x.jsx)(t.NN,{children:e.firm_gstno}),(0,x.jsx)(t.NN,{children:e.total_balance}),(0,x.jsxs)(t.NN,{children:[(0,x.jsx)(t.u5,{color:"warning",size:"sm",className:"me-2",onClick:()=>(e=>{g(e),u(!0)})(e),children:"Edit"}),(0,x.jsx)(t.u5,{color:"danger",size:"sm",onClick:()=>(e=>{C(e),p(!0)})(e),children:"Delete"})]}),(0,x.jsx)(t.NN,{children:(0,x.jsx)(t.u5,{color:"info",size:"sm",onClick:()=>k(e.firm_id),children:"View"})})]},e.firm_id)))})]})})]})})})})]}),(0,x.jsxs)(d.Z,{show:f,onHide:()=>u(!1),size:"lg",children:[(0,x.jsx)(d.Z.Header,{closeButton:!0,children:(0,x.jsx)(d.Z.Title,{children:"Edit Firm"})}),(0,x.jsx)(d.Z.Body,{children:(0,x.jsxs)(m.Z,{children:[(0,x.jsxs)(m.Z.Group,{controlId:"formFirmName",children:[(0,x.jsx)(m.Z.Label,{children:"Firm Name"}),(0,x.jsx)(m.Z.Control,{type:"text",value:_.firm_name,onChange:e=>g({..._,firm_name:e.target.value})})]}),(0,x.jsxs)(m.Z.Group,{controlId:"formFirmEmail",className:"mt-3",children:[(0,x.jsx)(m.Z.Label,{children:"Email"}),(0,x.jsx)(m.Z.Control,{type:"text",value:_.firm_email,onChange:e=>g({..._,firm_email:e.target.value})})]}),(0,x.jsxs)(m.Z.Group,{controlId:"formFirmGstno",className:"mt-3",children:[(0,x.jsx)(m.Z.Label,{children:"GST No."}),(0,x.jsx)(m.Z.Control,{type:"text",value:_.firm_gstno,onChange:e=>g({..._,firm_gstno:e.target.value})})]}),(0,x.jsxs)(m.Z.Group,{controlId:"formFirmAddress",className:"mt-3",children:[(0,x.jsx)(m.Z.Label,{children:"Address"}),(0,x.jsx)(m.Z.Control,{type:"text",value:_.firm_address,onChange:e=>g({..._,firm_address:e.target.value})})]})]})}),(0,x.jsxs)(d.Z.Footer,{children:[(0,x.jsx)(t.u5,{color:"secondary",onClick:()=>u(!1),children:"Close"}),(0,x.jsx)(t.u5,{color:"primary",onClick:()=>{(async(e,s)=>{try{const r=await o.Z.put("".concat(n.Y,"/api/users/update_firm_details/").concat(e),s);if(200!==r.status)throw new Error("Failed to update data");const a=r.data;alert(a.message),u(!1),S()}catch(r){console.error("Error updating data:",r)}})(_.firm_id,{firm_name:_.firm_name,firm_email:_.firm_email,firm_gstno:_.firm_gstno,firm_address:_.firm_address,firm_status:"1"})},children:"Save changes"})]})]}),(0,x.jsxs)(d.Z,{show:b,onHide:()=>p(!1),size:"sm",children:[(0,x.jsx)(d.Z.Header,{closeButton:!0,children:(0,x.jsx)(d.Z.Title,{children:"Delete Confirmation"})}),(0,x.jsx)(d.Z.Body,{children:"Are you sure you want to delete this firm?"}),(0,x.jsxs)(d.Z.Footer,{children:[(0,x.jsx)(t.u5,{color:"secondary",onClick:()=>p(!1),children:"Cancel"}),(0,x.jsx)(t.u5,{color:"danger",onClick:()=>{(async e=>{try{const s=await o.Z.delete("".concat(n.Y,"/api/users/delete_firm/").concat(e));if(200!==s.status)throw new Error("Failed to delete data");s.data,S()}catch(s){console.error("Error deleting data:",s)}})(y.firm_id),p(!1)},children:"Delete"})]})]}),(0,x.jsxs)(d.Z,{show:Z,onHide:()=>w(!1),size:"lg",children:[(0,x.jsx)(d.Z.Header,{closeButton:!0,children:(0,x.jsx)(d.Z.Title,{children:"Firm Details"})}),(0,x.jsx)(d.Z.Body,{children:(0,x.jsxs)("div",{children:[(0,x.jsxs)("h5",{children:["Firm Name: ",E.firm_name]}),(0,x.jsxs)("p",{children:["Email: ",E.firm_email]}),(0,x.jsxs)("p",{children:["GST No: ",E.firm_gstno]}),(0,x.jsxs)("p",{children:["Address: ",E.firm_address]}),(0,x.jsxs)("p",{children:["Status: ",E.firm_status]}),(0,x.jsxs)("p",{children:["Current Balance: ",E.total_balance]})]})}),(0,x.jsx)(d.Z.Footer,{children:(0,x.jsx)(t.u5,{color:"secondary",onClick:()=>w(!1),children:"Close"})})]})]})}},13162:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=6767.aa1e4baf.chunk.js.map