"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[626],{25407:(e,s,a)=>{a.d(s,{Y:()=>t});const t="http://13.233.105.76:3007"},58861:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var t=a(72791),r=a(47022),l=a(89743),n=a(2677),c=a(28282),o=a(16157),i=a(33821),d=a(323),m=a(53392),h=a(74292),u=a(34782),x=a(11087),j=a(13162),f=a(88898),g=a(25407),A=a(35109),Z=a(80184);const p=()=>{const{user:e}=(0,t.useContext)(f.S),s=e.userId,[a,p]=(0,t.useState)([]),[_,y]=(0,t.useState)(""),[b,w]=(0,t.useState)(""),[C,N]=(0,t.useState)([]),[v,S]=(0,t.useState)([]),[E,F]=(0,t.useState)(""),[T,k]=(0,t.useState)(""),[P,I]=(0,t.useState)(""),[U,L]=(0,t.useState)(!1),[B,Q]=(0,t.useState)(!1),[Y,K]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat(g.Y,"/api/users/get_all_firms_by_user/").concat(s));if(!e.ok)throw new Error("Failed to fetch data");const a=await e.json();p(a.data)}catch(e){console.error("Error fetching firms:",e)}})()}),[s]);const M=async e=>{try{const s=await fetch("".concat(g.Y,"/api/users/get_general_ledgers/").concat(e));if(!s.ok)throw new Error("Failed to fetch data");return(await s.json()).data}catch(s){console.error("Error fetching data:",s)}};(0,t.useEffect)((()=>{(async()=>{if(_){L(!0);const e=await M(_);N(e),L(!1)}})()}),[_]),(0,t.useEffect)((()=>{(async()=>{if(b){Q(!0);const e=await M(b);S(e),Q(!1)}})()}),[b]);return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(A.LC,{}),(0,Z.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,Z.jsx)(A.WW,{}),(0,Z.jsx)(r.Z,{fluid:!0,className:"flex-grow-1 px-3 px-md-5",children:(0,Z.jsx)(l.Z,{className:"justify-content-center mb-3",children:(0,Z.jsx)(n.Z,{md:12,children:(0,Z.jsxs)(c.Z,{className:"card_border_color_change py-5",style:{borderColor:"white"},children:[(0,Z.jsxs)(l.Z,{className:"allfirms_title_mainrow",children:[(0,Z.jsx)(n.Z,{md:9,style:{marginLeft:"10px"},children:(0,Z.jsxs)(l.Z,{className:"allfirms_title_row py-1 align-items-center",children:[(0,Z.jsx)(n.Z,{md:1,children:(0,Z.jsx)("img",{className:"",src:j,width:25,height:25,alt:"AllFirms Logo"})}),(0,Z.jsx)(n.Z,{md:4,children:(0,Z.jsx)("h4",{children:"Payments"})})]})}),(0,Z.jsx)(n.Z,{md:2,className:"d-flex align-items-center justify-content-end",children:(0,Z.jsx)(x.rU,{to:"/user_allpayments",children:(0,Z.jsx)(o.Z,{id:"but_color",children:"All Payments"})})})]}),(0,Z.jsx)(l.Z,{className:"allfirms_table_row py-5 justify-content-center",children:(0,Z.jsx)(n.Z,{md:6,className:"mb-3 mb-md-0",children:(0,Z.jsx)(l.Z,{className:"justify-content-center",children:(0,Z.jsxs)(n.Z,{md:12,children:[(0,Z.jsx)(c.Z,{className:"bg_color_blue_white",children:(0,Z.jsx)(c.Z.Body,{children:(0,Z.jsxs)(i.Z,{children:[(0,Z.jsx)(d.Z,{className:"mb-3",controlId:"formTransactionID",children:(0,Z.jsx)(m.Z,{children:"Transaction ID / SD101D"})}),(0,Z.jsxs)(d.Z,{as:l.Z,className:"mb-3",controlId:"formFrom",children:[(0,Z.jsx)(m.Z,{column:!0,sm:2,children:"From:"}),(0,Z.jsx)(n.Z,{sm:5,children:(0,Z.jsxs)(i.Z.Control,{as:"select",value:_,className:"form-select",onChange:e=>y(e.target.value),children:[(0,Z.jsx)("option",{value:"",children:"Select Firm"}),a.map((e=>(0,Z.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,Z.jsxs)(n.Z,{sm:5,children:[(0,Z.jsxs)(i.Z.Control,{as:"select",value:E,className:"form-select",onChange:e=>F(e.target.value),disabled:U,children:[(0,Z.jsx)("option",{value:"",children:"General Ledgers"}),C.map((e=>(0,Z.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]}),U&&(0,Z.jsx)("p",{children:"Loading..."})]})]}),(0,Z.jsxs)(d.Z,{as:l.Z,className:"mb-3",controlId:"formTo",children:[(0,Z.jsx)(m.Z,{column:!0,sm:2,children:"To:"}),(0,Z.jsx)(n.Z,{sm:5,children:(0,Z.jsxs)(i.Z.Control,{as:"select",value:b,className:"form-select",onChange:e=>w(e.target.value),children:[(0,Z.jsx)("option",{value:"",children:"Select Firm"}),a.map((e=>(0,Z.jsx)("option",{value:e.firm_id,children:e.firm_name},e.firm_id)))]})}),(0,Z.jsxs)(n.Z,{sm:5,children:[(0,Z.jsxs)(i.Z.Control,{as:"select",value:T,className:"form-select",onChange:e=>k(e.target.value),disabled:B,children:[(0,Z.jsx)("option",{value:"",children:"General Ledgers"}),v.map((e=>(0,Z.jsx)("option",{value:e.gl_id,children:e.gl_name},e.gl_id)))]}),B&&(0,Z.jsx)("p",{children:"Loading..."})]})]}),(0,Z.jsxs)(d.Z,{as:l.Z,className:"mb-3",controlId:"formAmount",children:[(0,Z.jsx)(m.Z,{column:!0,sm:2,children:"Amount :"}),(0,Z.jsx)(n.Z,{sm:5,children:(0,Z.jsx)(h.Z,{type:"text",placeholder:"Amount",value:P,onChange:e=>I(e.target.value)})})]})]})})}),(0,Z.jsx)(l.Z,{className:"justify-content-center mt-3",children:(0,Z.jsx)(o.Z,{className:"col-md-3 col-6",id:"but_color",onClick:async()=>{K(!0)},children:"Pay"})})]})})})})]})})})})]}),(0,Z.jsxs)(u.Z,{show:Y,onHide:()=>K(!1),centered:!0,children:[(0,Z.jsx)(u.Z.Header,{closeButton:!0,children:(0,Z.jsx)(u.Z.Title,{children:"Confirm Payment"})}),(0,Z.jsx)(u.Z.Body,{children:"Are you sure you want to proceed with this payment?"}),(0,Z.jsxs)(u.Z.Footer,{children:[(0,Z.jsx)(o.Z,{variant:"secondary",onClick:()=>K(!1),children:"Cancel"}),(0,Z.jsx)(o.Z,{variant:"primary",onClick:async()=>{try{const e={from_gl_id:E,to_gl_id:T,amount:Number(P),from_firm_id:_,to_firm_id:b},a=await fetch("".concat(g.Y,"/api/users/payment/").concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw new Error("Failed to process payment");const t=await a.json();console.log(t),alert("Payment successful"),K(!1)}catch(e){console.error("Error processing payment:",e),alert("Payment failed")}},children:"Confirm Payment"})]})]})]})}},13162:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAcCAYAAACdz7SqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgB7ZZPTsJAFMbfDEVJMdob2KUxttYb4A28gRyhobovezF4AuEEegPxBBJWLucILghRUjtMaUlK2xmmfxJY9Ldok29e3tfO+5IZgD2AkkLz0rYaGDSoCg/I7/eQxCUlZao03tnrHKriiPbZ041LGPaAIlgbY4xGUBDfpyPg7JjAlJL5dDCBgqimw107uO1dI0xzlMytmoy05jcVpTlK5lZNRlqTHOb2sgR3eWseNEmyZqOVMv1bej/8mXrpmkgrZVrPNKCeKdQzlTWdT58mVdTEEW6vptuaajh3ZXVpU0rR9fIUf7Fb1Jtq9F5bF7Ye6K0ruyOjM+mM1zt1MWOHL4GMtFJ2qCNKPwHhexk9VtFfzJ5dkPnTsCEQ9hqHX4f0TWMZXQTXFIH/coz/bxazQdf30S2EDXPrUrQN5+PEeugkdc2ytbb1aOXSTWeomj0XdhEUQ4VU3a8wK4sKsQsFva6bAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=626.ae9931e9.chunk.js.map