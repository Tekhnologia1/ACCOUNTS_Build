"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[691],{22054:(e,t,s)=>{s.d(t,{A:()=>n});s(65043);var a=s(86213),r=s(17598);const n=()=>({REGISTER:async e=>{try{return(await a.A.post("".concat(r.T,"/api/users/register"),e)).data}catch(t){throw console.log("Error registering:",t),t}},LOGIN:async e=>{try{return(await a.A.post("".concat(r.T,"/api/users/login"),e)).data}catch(t){throw console.log("Invalid credentials:",t),t}}})},17598:(e,t,s)=>{s.d(t,{T:()=>a});const a="http://3.111.33.23:3007"},13254:(e,t,s)=>{s.d(t,{N:()=>a});s(86213).A.create({baseURL:"http://192.168.1.69:3002"});class a{static isAuthenticated(){return null!==localStorage.getItem("token")}static login(e){localStorage.setItem("token",e)}static logout(){localStorage.removeItem("token")}static getUserData(){return localStorage.getItem("user")}}},17691:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(65043),r=s(53519),n=s(61072),o=s(78602),c=s(88258),l=s(67006),i=s(71666),d=s(68155);var u=s(73216),p=s(35475),h=s(13254),m=s(22054);class g extends Error{}function x(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let s=t.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s})))}(t)}catch(s){return atob(t)}}g.prototype.name="InvalidTokenError";var f=s(59395),N=(s(38421),s(70579));const j=()=>{const{user:e,setUser:t}=(0,a.useContext)(f.R),s=(0,u.Zp)(),[j,v]=(0,a.useState)(""),[_,b]=(0,a.useState)(""),[w,A]=(0,a.useState)(""),[y,I]=(0,a.useState)("");(0,a.useEffect)((()=>{console.log(e.userId)}),[e]);return(0,N.jsx)(r.A,{className:"d-flex justify-content-center mt-5",children:(0,N.jsx)(n.A,{className:"w-100",children:(0,N.jsx)(o.A,{md:5,className:"mx-auto",children:(0,N.jsx)(c.A,{className:"p-5",id:"card_border_color_change",children:(0,N.jsxs)(l.A,{className:"row g-3 needs-validation",noValidate:!0,children:[(0,N.jsx)("h1",{className:"text-center defaultcolor",children:"Log In"}),(0,N.jsx)(i.A,{className:"mb-2",children:(0,N.jsx)(l.A.Control,{className:"input_fields",onChange:e=>v(e.target.value),style:{borderRadius:"8px"},type:"email",placeholder:"Email address"})}),(0,N.jsx)(i.A,{className:"mb-4",children:(0,N.jsx)(l.A.Control,{className:"input_fields",onChange:e=>b(e.target.value),style:{borderRadius:"8px"},type:"password",placeholder:"Password"})}),(0,N.jsx)(n.A,{children:(0,N.jsxs)(o.A,{xs:12,className:"text-center",children:[(0,N.jsx)(d.A,{onClick:()=>{(0,m.A)().LOGIN({email:j,password:_}).then((e=>{console.log(e);const a=e.data.token;console.log(e);const r=function(e,t){if("string"!==typeof e)throw new g("Invalid token specified: must be a string");t||(t={});const s=!0===t.header?0:1,a=e.split(".")[s];if("string"!==typeof a)throw new g("Invalid token specified: missing part #".concat(s+1));let r;try{r=x(a)}catch(n){throw new g("Invalid token specified: invalid base64 for part #".concat(s+1," (").concat(n.message,")"))}try{return JSON.parse(r)}catch(n){throw new g("Invalid token specified: invalid json for part #".concat(s+1," (").concat(n.message,")"))}}(a);console.log(r),t((e=>({...e,userId:r.userId,email:r.email,role:r.role}))),A("Logged in successfully!"),h.N.login(a),"firm_user"===r.role?s("/firm_user_dash"):s("/super_admin_dash")})).catch((e=>{console.error("Invalid credentials:",e),I("Invalid credentials. Register yourself.")}))},className:"px-4",id:"but_color",type:"button",children:"Log in"}),y&&(0,N.jsx)("div",{className:"text-danger",children:y}),w&&(0,N.jsx)("div",{className:"text-success",children:w})]})}),(0,N.jsx)(n.A,{className:"mt-3",children:(0,N.jsx)(o.A,{className:"text-center",children:(0,N.jsx)(p.N_,{to:"/signup",children:(0,N.jsx)(d.A,{className:"px-4",id:"but_color",children:"New User ? Signup"})})})}),(0,N.jsx)("br",{})]})})})})})}},71666:(e,t,s)=>{s.d(t,{A:()=>m});var a=s(98139),r=s.n(a),n=s(65043),o=s(67852),c=s(21068);const l=n.createContext(null);l.displayName="InputGroupContext";const i=l;var d=s(70579);const u=n.forwardRef(((e,t)=>{let{className:s,bsPrefix:a,as:n="span",...c}=e;return a=(0,o.oU)(a,"input-group-text"),(0,d.jsx)(n,{ref:t,className:r()(s,a),...c})}));u.displayName="InputGroupText";const p=u,h=n.forwardRef(((e,t)=>{let{bsPrefix:s,size:a,hasValidation:c,className:l,as:u="div",...p}=e;s=(0,o.oU)(s,"input-group");const h=(0,n.useMemo)((()=>({})),[]);return(0,d.jsx)(i.Provider,{value:h,children:(0,d.jsx)(u,{ref:t,...p,className:r()(l,s,a&&"".concat(s,"-").concat(a),c&&"has-validation")})})}));h.displayName="InputGroup";const m=Object.assign(h,{Text:p,Radio:e=>(0,d.jsx)(p,{children:(0,d.jsx)(c.A,{type:"radio",...e})}),Checkbox:e=>(0,d.jsx)(p,{children:(0,d.jsx)(c.A,{type:"checkbox",...e})})})}}]);
//# sourceMappingURL=691.fa9185f7.chunk.js.map